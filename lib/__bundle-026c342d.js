import{X as e,_ as t,W as n,U as s,o as r,p as o,b as a,c as i,a7 as u,V as c,aj as h,at as l,u as E,b4 as N,ap as _}from"./__bundle-9a9a344d.js";import{p as d,q as p,ao as C,a5 as f,ap as m,aq as A,ar as v}from"./__bundle-b8334c7e.js";import{P as g}from"./__bundle-c336221f.js";var U;!function(e){e[e.NONE=0]="NONE",e[e.CHANNEL_ENTER=10102]="CHANNEL_ENTER",e[e.CHANNEL_EXIT=10103]="CHANNEL_EXIT",e[e.USER_CHANNEL_MUTE=10201]="USER_CHANNEL_MUTE",e[e.USER_CHANNEL_UNMUTE=10200]="USER_CHANNEL_UNMUTE",e[e.USER_CHANNEL_BAN=10601]="USER_CHANNEL_BAN",e[e.USER_CHANNEL_UNBAN=10600]="USER_CHANNEL_UNBAN",e[e.CHANNEL_FREEZE=10701]="CHANNEL_FREEZE",e[e.CHANNEL_UNFREEZE=10700]="CHANNEL_UNFREEZE",e[e.TYPING_START=10900]="TYPING_START",e[e.TYPING_END=10901]="TYPING_END",e[e.CHANNEL_JOIN=1e4]="CHANNEL_JOIN",e[e.CHANNEL_LEAVE=10001]="CHANNEL_LEAVE",e[e.CHANNEL_OPERATOR_UPDATE=10002]="CHANNEL_OPERATOR_UPDATE",e[e.CHANNEL_INVITE=10020]="CHANNEL_INVITE",e[e.CHANNEL_ACCEPT_INVITE=10021]="CHANNEL_ACCEPT_INVITE",e[e.CHANNEL_DECLINE_INVITE=10022]="CHANNEL_DECLINE_INVITE",e[e.CHANNEL_PROP_CHANGED=11e3]="CHANNEL_PROP_CHANGED",e[e.CHANNEL_DELETED=12e3]="CHANNEL_DELETED",e[e.CHANNEL_META_DATA_CHANGED=11100]="CHANNEL_META_DATA_CHANGED",e[e.CHANNEL_META_COUNTERS_CHANGED=11200]="CHANNEL_META_COUNTERS_CHANGED",e[e.CHANNEL_HIDE=13e3]="CHANNEL_HIDE",e[e.CHANNEL_UNHIDE=13001]="CHANNEL_UNHIDE",e[e.PINNED_MESSAGE_CHANGED=11300]="PINNED_MESSAGE_CHANGED"}(U||(U={}));var b=function(){function t(e){var t;this.channelUrl=e.channel_url,this.channelType=e.channel_type,this.category=e.cat,this.data=null!==(t=e.data)&&void 0!==t?t:{},this.ts=e.ts}return Object.defineProperty(t.prototype,"isGroupChannelEvent",{get:function(){return this.channelType===e.GROUP},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isOpenChannelEvent",{get:function(){return this.channelType===e.OPEN},enumerable:!1,configurable:!0}),t}(),T=function(e){function n(t,n,s){var r=e.call(this,t,"SYEV",s)||this;return r.event=new b(s),r}return t(n,e),n}(n),M=function(e){function n(t,n,r){var o=e.call(this,t,n,r)||this,a=r.data.operators,i=void 0===a?[]:a;return o.operators=i.map((function(e){return new s(o._iid,e)})),o}return t(n,e),n}(T),H=function(){function e(e){var t=e.top,n=void 0===t?Number.MAX_SAFE_INTEGER:t,s=e.bottom,r=void 0===s?0:s;this.top=n,this.bottom=r}return e.prototype.includes=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.every((function(t){return e.top<=t&&t<=e.bottom}))},e.prototype.overlap=function(e){return this.includes(e.top)||this.includes(e.bottom)},e.prototype.intersect=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.some((function(t){return e.top<=t&&t<=e.bottom}))},e.prototype.extends=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.top=Math.min.apply(Math,r([this.top],o(e),!1)),this.bottom=Math.max.apply(Math,r([this.bottom],o(e),!1))},e}(),L=function(e){function n(t,n){var s=e.call(this,t)||this;return s._logger=n.logger,s._sdkState=n.sdkState,s._sessionManager=n.sessionManager,s._requestQueue=n.requestQueue,s._dispatcher=n.dispatcher,s._cacheContext=n.cacheContext,s._channelType=n.channelType,s}return t(n,e),Object.defineProperty(n.prototype,"_messageCache",{get:function(){return d.of(this._iid)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_unsentMessageCache",{get:function(){return p.of(this._iid)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_messageBroadcast",{get:function(){return C.of(this._iid)},enumerable:!1,configurable:!0}),n.prototype.subscribeMessageEvent=function(e,t){this._messageBroadcast.subscribe(e,t)},n.prototype.unsubscribeMessageEvent=function(e){this._messageBroadcast.unsubscribe(e)},n.prototype.getMessageFromCache=function(e){var t;return a(this,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return[4,this._messageCache.get(e)];case 1:return[2,null!==(t=n.sent())&&void 0!==t?t:null]}}))}))},n.prototype.getExactlyMatchingMessagesForTokenFromCache=function(e,t,n){return a(this,void 0,void 0,(function(){return i(this,(function(s){switch(s.label){case 0:return[4,this._messageCache.fetch({channelUrl:e,token:t,filter:n,exactMatch:!0})];case 1:return[2,s.sent()]}}))}))},n.prototype.getMessagesFromCache=function(e,t,n,s,r,o){return void 0===r&&(r=f),void 0===o&&(o=!0),a(this,void 0,void 0,(function(){return i(this,(function(a){switch(a.label){case 0:return[4,this._messageCache.fetch({channelUrl:e,token:t,limit:r,filter:s,backward:"next"===n,inclusive:o})];case 1:return[2,a.sent()]}}))}))},n.prototype.getPollMessagesFromCache=function(e,t,n,s){return a(this,void 0,void 0,(function(){return i(this,(function(r){switch(r.label){case 0:return[4,this._messageCache.fetch({channelUrl:e,token:t,limit:s,filter:n,backward:!1,isPollOnly:!0})];case 1:return[2,r.sent()]}}))}))},n.prototype.getCachedMessageCountBetween=function(e,t,n,s){return a(this,void 0,void 0,(function(){return i(this,(function(r){switch(r.label){case 0:return[4,this._messageCache.countBetween(e,t,new H({top:n,bottom:s}))];case 1:return[2,r.sent()]}}))}))},n.prototype.getUnsentMessagesFromCache=function(e,t){return a(this,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return[4,this._unsentMessageCache.fetch({channelUrl:e,filter:t})];case 1:return[2,n.sent()]}}))}))},n.prototype.removeFailedMessageFromCache=function(e){return a(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,this._unsentMessageCache.remove([e])];case 1:return t.sent(),[2]}}))}))},n}(u),y=function(e){function n(t,n,s){var r,o,a,i,u=this;(u=e.call(this,t,"ADMM",s)||this).message=new m(t,s);var l=c.of(t).sdkState;return u.isMentioned=h(u.message.mentionType,null!==(a=null!==(r=u.message.mentionedUserIds)&&void 0!==r?r:null===(o=u.message.mentionedUsers)||void 0===o?void 0:o.map((function(e){return e.userId})))&&void 0!==a?a:[],l.userId),u.forceUpdateLastMessage=null!==(i=s.force_update_last_message)&&void 0!==i&&i,u}return t(n,e),n}(n),I=function(e){function n(t,n,s){var r,o,a,i,u,h=this;(h=e.call(this,t,"AEDI",s)||this).message=new m(t,s);var N=c.of(t).sdkState;return h.mentionCountChange=l({mentionType:null===(r=s.old_values)||void 0===r?void 0:r.mention_type,mentionedUserIds:null!==(a=null===(o=s.old_values)||void 0===o?void 0:o.mentioned_user_ids)&&void 0!==a?a:[]},E({mentionType:h.message.mentionType,mentionedUserIds:null!==(i=h.message.mentionedUserIds)&&void 0!==i?i:null===(u=h.message.mentionedUsers)||void 0===u?void 0:u.map((function(e){return e.userId}))}),N.userId),h}return t(n,e),n}(n),D=function(e){function n(t,n,s){var r=e.call(this,t,"MRCT",s)||this;return r.channelUrl=s.channel_url,r.channelType=s.channel_type,r.event=new A(s),r}return t(n,e),n}(n),R=function(e){function n(t,n,s){var r=e.call(this,t,"MTHD",s)||this;return r.event=new v(t,s),r}return t(n,e),n}(n),P=function(e){function n(t,n,s){var r=e.call(this,t,"MCNT",s)||this;return r.groupChannelMemberCounts=s.group_channels.map((function(e){return{channelUrl:e.channel_url,memberCount:e.member_count,joinedMemberCount:e.joined_member_count,updatedAt:e.ts}})),r.openChannelMemberCounts=s.open_channels.map((function(e){return{channelUrl:e.channel_url,participantCount:e.participant_count,updatedAt:e.ts}})),r}return t(n,e),n}(n),O=function(e){function n(t,n,s){var r=e.call(this,t,"PEDI",s)||this;return r.event=new g(t,s),r.status=N(s.poll.status)||s.poll.status,r.channelUrl=s.channel_url,r.channelType=s.channel_type,r}return t(n,e),n}(n),S=function(){this.onUserMuted=_,this.onUserUnmuted=_,this.onUserBanned=_,this.onUserUnbanned=_,this.onChannelChanged=_,this.onChannelDeleted=_,this.onChannelFrozen=_,this.onChannelUnfrozen=_,this.onOperatorUpdated=_,this.onChannelMemberCountChanged=_,this.onMetaDataCreated=_,this.onMetaDataUpdated=_,this.onMetaDataDeleted=_,this.onMetaCounterCreated=_,this.onMetaCounterUpdated=_,this.onMetaCounterDeleted=_,this.onMessageReceived=_,this.onMessageUpdated=_,this.onMessageDeleted=_,this.onMentionReceived=_,this.onReactionUpdated=_,this.onThreadInfoUpdated=_};export{y as A,S as B,T as C,P as M,M as O,O as P,D as R,H as T,I as U,L as a,U as b,R as c};
