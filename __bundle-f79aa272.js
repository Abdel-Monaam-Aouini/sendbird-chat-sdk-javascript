import{a7 as e,a as t,H as n,l as r,U as a,a8 as i,a9 as s,aa as o,g as u,e as c,i as l,_ as d,A as h,ab as p,f,h as m,b as v,c as y,ac as g,S as _,V as T,W as U,ad as I,J as w,ae as E,X as M,af as b,ag as S,Y as C,ah as A,F as P,ai as D,aj as R,ak as q,a0 as N,o as k,O,a1 as L,a4 as F,u as Q,al as z,a5 as x,a6 as G,t as V,am as j,Z as B,an as W,I as K,ao as Y,ap as H,p as J,m as X,aq as Z,ar as $,as as ee,at as te,au as ne,Q as re,av as ae}from"./__bundle-26bafa9e.js";var ie,se={data:null,customType:null,mentionType:e.USERS,mentionedUserIds:null,mentionedUsers:null,mentionedMessageTemplate:null,metaArrays:null,parentMessageId:null,isReplyToChannel:!1,pushNotificationDeliveryOption:null,appleCriticalAlertOptions:null},oe=function(u){return t("string",u.data,!0)&&t("string",u.customType,!0)&&n(e,u.mentionType)&&r("string",u.mentionedUserIds,!0)&&r(a,u.mentionedUsers,!0)&&t("string",u.mentionedMessageTemplate,!0)&&r(i,u.metaArrays,!0)&&t("number",u.parentMessageId,!0)&&t("boolean",u.isReplyToChannel)&&n(s,u.pushNotificationDeliveryOption,!0)&&t(o,u.appleCriticalAlertOptions,!0)},ue=function(e){return e?{isReplyToChannel:e.isReplyToChannel,pushNotificationDeliveryOption:e.pushNotificationDeliveryOption}:null},ce=u(u({},se),{message:null,translationTargetLanguages:null}),le=function(e){return oe(e)&&t("string",e.message)&&r("string",e.translationTargetLanguages,!0)};!function(e){e.FILE="file",e.BLOB="blob",e.BLOB_LIKE_OBJECT="blobLikeObject",e.URL="url"}(ie||(ie={}));var de,he=function(e){return"undefined"!=typeof window&&"Blob"in window&&"undefined"!=typeof Blob&&e instanceof Blob},pe=function(e){return e===ie.BLOB||e===ie.FILE},fe=function(e){return e?{file:e.file,fileKey:e.fileKey,fileType:e.fileType,isReplyToChannel:e.isReplyToChannel,pushNotificationDeliveryOption:e.pushNotificationDeliveryOption}:null},me=u(u({},se),{file:null,fileKey:null,fileUrl:null,fileName:null,fileType:null,fileSize:null,mimeType:null,thumbnailSizes:null,requireAuth:!1}),ve=function(e){return oe(e)&&(l(e.file)||t("string",e.fileUrl))&&t("string",e.fileName,!0)&&t("string",e.mimeType,!0)&&t("number",e.fileSize,!0)&&(null===e.thumbnailSizes||Array.isArray(e.thumbnailSizes)&&e.thumbnailSizes.every((function(e){return t("object",e)&&e.maxWidth>0&&e.maxHeight>0})))};!function(e){e.MUTED="muted",e.BANNED="banned"}(de||(de={}));var ye,ge=function(){function e(e){var t,r,a;this.restrictionType=null,this.description=null,this.endAt=-1,n(de,e.restriction_type)&&(this.restrictionType=e.restriction_type),this.description=null!==(t=e.description)&&void 0!==t?t:null,this.endAt=null!==(a=null!==(r=e.end_at)&&void 0!==r?r:e.muted_end_at)&&void 0!==a?a:-1}return e.payloadify=function(e){return e?c({restriction_type:e.restrictionType,description:e.description,end_at:e.endAt}):null},e}(),_e=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.restrictionInfo=null,r.restrictionInfo=new ge(n),r}return d(t,e),t.payloadify=function(t){return t?c(u(u({},e.payloadify.call(this,t)),ge.payloadify(t.restrictionInfo))):null},t}(a),Te={data:null,customType:null,mentionType:e.USERS,mentionedUserIds:null,mentionedUsers:null,mentionedMessageTemplate:null,metaArrays:null,pushNotificationDeliveryOption:null,appleCriticalAlertOptions:null},Ue=function(u){return t("string",u.data,!0)&&t("string",u.customType,!0)&&n(e,u.mentionType)&&r("string",u.mentionedUserIds,!0)&&r(a,u.mentionedUsers,!0)&&t("string",u.mentionedMessageTemplate,!0)&&r(i,u.metaArrays,!0)&&n(s,u.pushNotificationDeliveryOption,!0)&&t(o,u.appleCriticalAlertOptions,!0)},Ie=u(u({},Te),{message:null,translationTargetLanguages:null}),we=function(e){return Ue(e)&&t("string",e.message,!0)&&r("string",e.translationTargetLanguages,!0)},Ee=u({},Te),Me=function(e){function t(t){var n=t.channelUrl,r=t.channelType,a=t.token,i=t.limit,s=e.call(this)||this;return s.method=h.GET,s.path="".concat(p(r),"/").concat(encodeURIComponent(n),"/operators"),s.params={token:a,limit:i},s}return d(t,e),t}(f),be=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.operators=n.operators.map((function(e){return new a(t,e)})),r.token=n.next,r}return d(t,e),t}(m),Se=function(e){function t(t,n,r,a){return e.call(this,t,n,r,a)||this}return d(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)},t.prototype.next=function(){return v(this,void 0,void 0,(function(){var e,t,n,r,a,i,s;return y(this,(function(o){switch(o.label){case 0:return this._validate()?this._isLoading?[3,3]:(e=[],this._hasNext?(this._isLoading=!0,t=T.of(this._iid).requestQueue,n=new Me(u(u({},this),{channelUrl:this.channelUrl,token:this._token})),[4,t.send(n)]):[3,2]):[3,5];case 1:return r=o.sent(),a=r.as(be),i=a.operators,s=a.token,this._token=s,this._hasNext=!!s,this._isLoading=!1,[2,i];case 2:return[2,e];case 3:throw _.queryInProgress;case 4:return[3,6];case 5:throw _.invalidParameters;case 6:return[2]}}))}))},t}(g),Ce=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.limit,s=t.token;return(n=e.call(this)||this).method=h.GET,n.path="".concat(p(a),"/").concat(encodeURIComponent(r),"/mute"),n.params={limit:i,token:s},n}return d(t,e),t}(f),Ae=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.token=null,r.mutedUsers=[];var a=n.next,i=n.muted_list;return r.token=a,i&&i.length>0&&(r.mutedUsers=i.map((function(e){return new _e(t,e)}))),r}return d(t,e),t}(m),Pe=function(e){function t(t,n,r,a){return e.call(this,t,n,r,a)||this}return d(t,e),t.prototype.next=function(){return v(this,void 0,void 0,(function(){var e,t,n,r,a,i;return y(this,(function(s){switch(s.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=T.of(this._iid).requestQueue,t=new Ce(u(u({},this),{token:this._token})),[4,e.send(t)]):[3,2]:[3,5];case 1:return n=s.sent(),r=n.as(Ae),a=r.mutedUsers,i=r.token,this._token=i,this._hasNext=!!i,this._isLoading=!1,[2,a];case 2:return[2,[]];case 3:throw _.queryInProgress;case 4:return[3,6];case 5:throw _.invalidParameters;case 6:return[2]}}))}))},t}(g),De=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.limit,s=t.token;return(n=e.call(this)||this).method=h.GET,n.path="".concat(p(a),"/").concat(encodeURIComponent(r),"/ban"),n.params=c({limit:i,token:s}),n}return d(t,e),t}(f),Re=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.token=null,r.bannedUsers=[];var a=n.next,i=n.banned_list;return r.token=a,i&&i.length>0&&(r.bannedUsers=i.map((function(e){return new _e(t,e.user)}))),r}return d(t,e),t}(m),qe=function(e){function t(t,n,r,a){return e.call(this,t,n,r,a)||this}return d(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)},t.prototype.next=function(){return v(this,void 0,void 0,(function(){var e,t,n,r,a,i;return y(this,(function(s){switch(s.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=T.of(this._iid).requestQueue,t=new De(u(u({},this),{token:this._token})),[4,e.send(t)]):[3,2]:[3,5];case 1:return n=s.sent(),r=n.as(Re),a=r.bannedUsers,i=r.token,this._token=i,this._hasNext=!!i,this._isLoading=!1,[2,a];case 2:return[2,[]];case 3:throw _.queryInProgress;case 4:return[3,6];case 5:throw _.invalidParameters;case 6:return[2]}}))}))},t}(g);!function(e){e.SPAM="spam",e.HARASSING="harassing",e.SUSPICIOUS="suspicious",e.INAPPROPRIATE="inappropriate"}(ye||(ye={}));var Ne=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.operatorUserIds;return(n=e.call(this)||this).method=h.POST,n.path="".concat(p(a),"/").concat(encodeURIComponent(r),"/operators"),n.params={operator_ids:i},n}return d(t,e),t}(f);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}d(t,e)}(m);var ke=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.operatorUserIds;return(n=e.call(this)||this).method=h.DELETE,n.path="".concat(p(a),"/").concat(encodeURIComponent(r),"/operators"),n.params={operator_ids:i},n}return d(t,e),t}(f);!function(e){function t(t,n){return e.call(this,t,n)||this}d(t,e)}(m);var Oe=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.userId;return(n=e.call(this)||this).method=h.GET,n.path="".concat(p(a),"/").concat(encodeURIComponent(r),"/mute/").concat(i),n}return d(t,e),t}(f),Le=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.isMuted=!1,r.startAt=null,r.endAt=null,r.remainingDuration=null,r.description=null;var a=n.is_muted,i=n.start_at,s=n.end_at,o=n.remaining_duration,u=n.description;return r.isMuted=a,r.startAt=i,r.endAt=s,r.remainingDuration=o,r.description=u,r}return d(t,e),t}(m),Fe=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.keys;return(n=e.call(this)||this).method=h.GET,n.path="".concat(p(a),"/").concat(encodeURIComponent(r),"/metadata"),n.params={keys:i,include_ts:!0},n}return d(t,e),t}(f),Qe=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.ts=null;var a=n.metadata,i=n.ts;return r.metadata=a,r.ts=null!=i?i:null,r}return d(t,e),t}(m),ze=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.metadata,s=t.upsert;return(n=e.call(this)||this).method=h.PUT,n.path="".concat(p(a),"/").concat(encodeURIComponent(r),"/metadata"),n.params={metadata:i,include_ts:!0,upsert:null!=s&&s},n}return d(t,e),t}(f),xe=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.ts=null;var a=n.metadata,i=n.ts;return r.metadata=a,r.ts=null!=i?i:null,r}return d(t,e),t}(m),Ge=function(e){function t(t,n,r){var a=e.call(this,t,"SYEV",r)||this;return a.created=null,a.updated=null,a.deleted=null,r.data&&(a.created=r.data.created,a.updated=r.data.updated,a.deleted=r.data.deleted),a}return d(t,e),t}(U),Ve=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.key;return(n=e.call(this)||this).method=h.DELETE,n.path="".concat(p(a),"/").concat(encodeURIComponent(r),"/metadata/").concat(i),n.params={include_ts:!0},n}return d(t,e),t}(f),je=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.ts=null;var a=n.ts;return r.ts=null!=a?a:null,r}return d(t,e),t}(m),Be=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType;return(n=e.call(this)||this).method=h.PUT,n.path="".concat(p(a),"/").concat(encodeURIComponent(r),"/metadata"),n.params={include_ts:!0},n}return d(t,e),t}(f),We=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.ts=null;var a=n.ts;return r.ts=null!=a?a:null,r}return d(t,e),t}(m),Ke=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.keys;return(n=e.call(this)||this).method=h.GET,n.path="".concat(p(a),"/").concat(encodeURIComponent(r),"/metacounter"),n.params={keys:i},n}return d(t,e),t}(f),Ye=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.metaCounter=n,r}return d(t,e),t}(m),He=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.metaCounter;return(n=e.call(this)||this).method=h.POST,n.path="".concat(p(a),"/").concat(encodeURIComponent(r),"/metacounter"),n.params={metacounter:i},n}return d(t,e),t}(f),Je=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.metaCounter=n,r}return d(t,e),t}(m),Xe=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.metaCounter,s=t.upsert,o=void 0!==s&&s,u=t.mode,c=void 0===u?"set":u;return(n=e.call(this)||this).method=h.PUT,n.path="".concat(p(a),"/").concat(encodeURIComponent(r),"/metacounter"),n.params={metacounter:i,upsert:o,mode:c},n}return d(t,e),t}(f),Ze=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.metaCounter=n,r}return d(t,e),t}(m),$e=function(e){function t(t,n,r){var a=e.call(this,t,"SYEV",r)||this;return a.created=null,a.updated=null,a.deleted=null,r.data&&(a.created=r.data.created,a.updated=r.data.updated,a.deleted=r.data.deleted),a}return d(t,e),t}(U),et=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.key;return(n=e.call(this)||this).method=h.DELETE,n.path="".concat(p(a),"/").concat(encodeURIComponent(r),"/metacounter/").concat(i),n.params=null,n}return d(t,e),t}(f);!function(e){function t(t,n){return e.call(this,t,n)||this}d(t,e)}(m);var tt=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType;return(n=e.call(this)||this).method=h.DELETE,n.path="".concat(p(a),"/").concat(encodeURIComponent(r),"/metacounter"),n.params=null,n}return d(t,e),t}(f);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}d(t,e)}(m);var nt=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.userId,s=t.seconds,o=t.description;return(n=e.call(this)||this).method=h.POST,n.path="".concat(p(a),"/").concat(encodeURIComponent(r),"/mute"),n.params={user_id:i,seconds:s,description:o},n}return d(t,e),t}(f);!function(e){function t(t,n){return e.call(this,t,n)||this}d(t,e)}(m);var rt=function(e){function t(t,n,r){var a=e.call(this,t,"SYEV",r)||this;return a.user=new _e(t,r.data),a}return d(t,e),t}(U),at=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.userId;return(n=e.call(this)||this).method=h.DELETE,n.path="".concat(p(a),"/").concat(encodeURIComponent(r),"/mute/").concat(encodeURIComponent(i)),n}return d(t,e),t}(f);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}d(t,e)}(m);var it=function(e){function t(t,n,r){var a=e.call(this,t,"SYEV",r)||this;return a.user=new _e(t,r.data),a}return d(t,e),t}(U),st=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.userId,s=t.seconds,o=t.description;return(n=e.call(this)||this).method=h.POST,n.path="".concat(p(a),"/").concat(encodeURIComponent(r),"/ban"),n.params=c({user_id:i,seconds:s,description:o}),n}return d(t,e),t}(f);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}d(t,e)}(m);var ot=function(e){function t(t,n,r){var a=e.call(this,t,"SYEV",r)||this;return a.memberCount=null,a.joinedMemberCount=null,a.user=new _e(t,r.data),r.data.member_count&&(a.memberCount=r.data.member_count),r.data.joined_member_count&&(a.joinedMemberCount=r.data.joined_member_count),a}return d(t,e),t}(U),ut=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.userId;return(n=e.call(this)||this).method=h.DELETE,n.path="".concat(p(a),"/").concat(encodeURIComponent(r),"/ban/").concat(encodeURIComponent(i)),n}return d(t,e),t}(f);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}d(t,e)}(m);var ct=function(e){function t(t,n,r){var a=e.call(this,t,"SYEV",r)||this;return a.user=new _e(t,r.data),a}return d(t,e),t}(U),lt=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.freezing;return(n=e.call(this)||this).method=h.PUT,n.path="".concat(p(a),"/").concat(encodeURIComponent(r),"/freeze"),n.params={freeze:i},n}return d(t,e),t}(f);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}d(t,e)}(m);var dt=function(e){function t(t,n,r){var a=e.call(this,t,"SYEV",r)||this;return a.freeze=r.data.freeze,a}return d(t,e),t}(U),ht=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.category,s=t.userId,o=t.description;return(n=e.call(this)||this).method=h.POST,n.path="".concat(I(a),"/").concat(encodeURIComponent(r)),n.params={report_category:i,reporting_user_id:s,report_description:o},n}return d(t,e),t}(f),pt=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.category,s=t.userId,o=t.offendingUserId,u=t.description;return(n=e.call(this)||this).method=h.POST,n.path="/report/users/".concat(o),n.params={channel_url:r,channel_type:a===w.OPEN?"open_channels":"group_channels",report_category:i,reporting_user_id:s,report_description:u},n}return d(t,e),t}(f),ft=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.category,s=t.userId,o=t.offendingUserId,u=t.messageId,c=t.description;return(n=e.call(this)||this).method=h.POST,n.path="".concat(I(a),"/").concat(encodeURIComponent(r),"/messages/").concat(u),n.params={report_category:i,reporting_user_id:s,report_description:c,offending_user_id:o},n}return d(t,e),t}(f),mt=function(t){function n(n){var r=[];return n.mentionType===e.USERS&&(n.mentionedUserIds?r=n.mentionedUserIds:n.mentionedUsers&&(r=n.mentionedUsers.map((function(e){return e.userId})))),t.call(this,{code:"MESG",ackRequired:!0,payload:c({channel_url:n.channelUrl,message:n.message,data:n.data,custom_type:n.customType,metaarray:n.metaArrays,mention_type:n.mentionType,mentioned_user_ids:r,mentioned_message_template:n.mentionedMessageTemplate,target_langs:n.translationTargetLanguages,push_option:n.pushNotificationDeliveryOption&&n.pushNotificationDeliveryOption!==s.DEFAULT?n.pushNotificationDeliveryOption:void 0,apple_critical_alert_options:n.appleCriticalAlertOptions,silent:n.silent,is_reply_to_channel:n.isReplyToChannel,parent_message_id:n.parentMessageId>0?n.parentMessageId:null,req_id:n.reqId})})||this}return d(n,t),n}(E),vt=function(e){function t(t,n,r){var a,i,s,o=this;(o=e.call(this,t,"MESG",r)||this).message=new M(t,r);var u=T.of(t).sdkState;return o.isMentioned=b(o.message.mentionType,null!==(a=o.message.mentionedUserIds)&&void 0!==a?a:null===(i=o.message.mentionedUsers)||void 0===i?void 0:i.map((function(e){return e.userId})),u.userId),o.forceUpdateLastMessage=null!==(s=r.force_update_last_message)&&void 0!==s&&s,o}return d(t,e),t}(U),yt=function(t){function n(n){var r=[];return n.mentionType===e.USERS&&(n.mentionedUserIds?r=n.mentionedUserIds:n.mentionedUsers&&(r=n.mentionedUsers.map((function(e){return e.userId})))),t.call(this,{code:"MEDI",ackRequired:!0,payload:c({channel_url:n.channelUrl,msg_id:n.messageId,message:n.message,data:n.data,custom_type:n.customType,metaarray:n.metaArrayParams,mention_type:n.mentionType,mentioned_user_ids:r,mentioned_message_template:n.mentionedMessageTemplate,apple_critical_alert_options:n.appleCriticalAlertOptions})})||this}return d(n,t),n}(E),gt=function(e){function t(t,n,r){var a,i,s,o,u,c,l=this;(l=e.call(this,t,"MEDI",r)||this).message=new M(t,r);var d=T.of(t).sdkState;return l.mentionCountChange=S({mentionType:null!==(i=null===(a=r.old_values)||void 0===a?void 0:a.mention_type)&&void 0!==i?i:null,mentionedUserIds:null!==(o=null===(s=r.old_values)||void 0===s?void 0:s.mentioned_user_ids)&&void 0!==o?o:[]},{mentionType:l.message.mentionType,mentionedUserIds:null!==(u=l.message.mentionedUserIds)&&void 0!==u?u:null===(c=l.message.mentionedUsers)||void 0===c?void 0:c.map((function(e){return e.userId}))},d.userId),l}return d(t,e),t}(U),_t=function(t){function n(n){var r=[];return n.mentionType===e.USERS&&(n.mentionedUserIds?r=n.mentionedUserIds:n.mentionedUsers&&(r=n.mentionedUsers.map((function(e){return e.userId})))),t.call(this,{code:"FEDI",ackRequired:!0,payload:c({channel_url:n.channelUrl,msg_id:n.messageId,data:n.data,custom_type:n.customType,metaarray:n.metaArrayParams,mention_type:n.mentionType,mentioned_user_ids:r,apple_critical_alert_options:n.appleCriticalAlertOptions})})||this}return d(n,t),n}(E),Tt=function(e){function t(t,n,r){var a,i,s,o,u,c,l=this;(l=e.call(this,t,"FEDI",r)||this).message=new C(t,r);var d=T.of(t).sdkState;return l.mentionCountChange=S({mentionType:null!==(i=null===(a=r.old_values)||void 0===a?void 0:a.mention_type)&&void 0!==i?i:null,mentionedUserIds:null!==(o=null===(s=r.old_values)||void 0===s?void 0:s.mentioned_user_ids)&&void 0!==o?o:[]},{mentionType:l.message.mentionType,mentionedUserIds:null!==(u=l.message.mentionedUserIds)&&void 0!==u?u:null===(c=l.message.mentionedUsers)||void 0===c?void 0:c.map((function(e){return e.userId}))},d.userId),l}return d(t,e),t}(U),Ut=function(e){function t(t){var n=e.call(this)||this;return n.method=h.DELETE,n.path="".concat(p(t.channelType),"/").concat(t.channelUrl,"/messages/").concat(t.messageId),n}return d(t,e),t}(f);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}d(t,e)}(m);var It=function(e){function t(t,n,r){var a=e.call(this,t,"DELM",r)||this;return a.channelUrl=r.channel_url,a.channelType=r.channel_type,a.messageId=Number(r.msg_id),a}return d(t,e),t}(U),wt=function(e){function t(t){var n=t.channelType,r=t.channelUrl,a=t.messageId,i=t.reactionKey,s=e.call(this)||this;return s.method=h.POST,s.path="".concat(p(n),"/").concat(encodeURIComponent(r),"/messages/").concat(a,"/reactions"),s.params={reaction:i},s}return d(t,e),t}(f),Et=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.reactionEvent=new A(n),r}return d(t,e),t}(m),Mt=function(e){function t(t){var n=t.channelType,r=t.channelUrl,a=t.messageId,i=t.reactionKey,s=e.call(this)||this;return s.method=h.DELETE,s.path="".concat(p(n),"/").concat(encodeURIComponent(r),"/messages/").concat(a,"/reactions"),s.params={reaction:i},s}return d(t,e),t}(f),bt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.reactionEvent=new A(u({},n)),r}return d(t,e),t}(m),St=function(e){function t(t){var n=t.channelType,r=t.channelUrl,a=t.messageId,i=t.translationTargetLanguages,s=e.call(this)||this;return s.method=h.POST,s.path="".concat(p(n),"/").concat(encodeURIComponent(r),"/messages/").concat(encodeURIComponent(a),"/translation"),s.params={target_langs:i},s}return d(t,e),t}(f),Ct=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.message=new M(t,n),r}return d(t,e),t}(m),At=function(e){function l(n,r){var i,s,o,u,c=this;return(c=e.call(this,n)||this).url="",c.channelType=w.BASE,c.name="",c.coverUrl="",c.customType="",c.data="",c.isFrozen=!1,c.isEphemeral=!1,c.creator=null,c.createdAt=0,c.url=r.channel_url,c.name=null!==(i=r.name)&&void 0!==i?i:"",c.coverUrl=null!==(s=r.cover_url)&&void 0!==s?s:"",c.customType=null!==(o=r.custom_type)&&void 0!==o?o:"",c.data=null!==(u=r.data)&&void 0!==u?u:"",c.isFrozen=!!t("boolean",r.freeze)&&r.freeze,c.isEphemeral=!!t("boolean",r.is_ephemeral)&&r.is_ephemeral,c.creator=r.created_by?new a(c._iid,r.created_by):null,c.createdAt=1e3*r.created_at,c._cachedMetaData=new Map,r.metadata&&r.ts&&Object.keys(r.metadata).forEach((function(e){c._cachedMetaData.set(e,{value:r.metadata[e],isRemoved:!1,updatedAt:r.ts})})),c}return d(l,e),l.payloadify=function(t){return c(u(u({},e.payloadify.call(this,t)),{channel_url:t.url,name:t.name,cover_url:t.coverUrl,custom_type:t.customType,data:t.data,freeze:t.isFrozen,is_ephemeral:t.isEphemeral,created_by:a.payloadify(t.creator),created_at:t.createdAt/1e3}))},l.prototype.isGroupChannel=function(){return this.channelType===w.GROUP},l.prototype.isOpenChannel=function(){return this.channelType===w.OPEN},Object.defineProperty(l.prototype,"cachedMetaData",{get:function(){var e={};return this._cachedMetaData.forEach((function(t,n){t.isRemoved||(e[n]=t.value)})),e},enumerable:!1,configurable:!0}),l.prototype._upsertCachedMetaData=function(e,t){var n=this;Object.keys(e).forEach((function(r){var a=n._cachedMetaData.get(r);(!a||a.updatedAt<=t)&&n._cachedMetaData.set(r,{value:e[r],isRemoved:!1,updatedAt:t})}))},l.prototype._removeFromCachedMetaData=function(e,t){var n=this;e.forEach((function(e){var r=n._cachedMetaData.get(e);r&&r.updatedAt<t&&(r.isRemoved=!1,r.updatedAt=t)}))},l.prototype._generateRequestId=function(){return"rq-".concat(P())},l.prototype.isIdentical=function(e){return e&&this.url===e.url},l.prototype.isEqual=function(e){return D(this,e)},l.prototype.createOperatorListQuery=function(e){return void 0===e&&(e={}),new Se(this._iid,this.url,this.channelType,e)},l.prototype.createMutedUserListQuery=function(e){return void 0===e&&(e={}),new Pe(this._iid,this.url,this.channelType,e)},l.prototype.createBannedUserListQuery=function(e){return void 0===e&&(e={}),new qe(this._iid,this.url,this.channelType,e)},l.prototype.createPreviousMessageListQuery=function(e){return void 0===e&&(e={}),new R(this._iid,this.url,this.channelType,e)},l.prototype.addOperators=function(e){return v(this,void 0,void 0,(function(){var t,n;return y(this,(function(a){switch(a.label){case 0:return Q(r("string",e)).throw(_.invalidParameters),t=T.of(this._iid).requestQueue,n=new Ne({channelUrl:this.url,channelType:this.channelType,operatorUserIds:e}),[4,t.send(n)];case 1:return a.sent(),[2]}}))}))},l.prototype.removeOperators=function(e){return v(this,void 0,void 0,(function(){var t,n;return y(this,(function(a){switch(a.label){case 0:return Q(r("string",e)).throw(_.invalidParameters),t=T.of(this._iid).requestQueue,n=new ke({channelUrl:this.url,channelType:this.channelType,operatorUserIds:e}),[4,t.send(n)];case 1:return a.sent(),[2]}}))}))},l.prototype.getMyMutedInfo=function(){return v(this,void 0,void 0,(function(){var e,t,n,r,a,i,s,o,u,c,l;return y(this,(function(d){switch(d.label){case 0:return e=T.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new Oe({channelUrl:this.url,channelType:this.channelType,userId:t.userId}),[4,n.send(r)];case 1:return a=d.sent(),i=a.as(Le),s=i.isMuted,o=i.startAt,u=i.endAt,c=i.remainingDuration,l=i.description,[2,{isMuted:s,startAt:o,endAt:u,remainingDuration:c,description:l}]}}))}))},l.prototype.getMetaData=function(e){return v(this,void 0,void 0,(function(){var t,n,a,i,s,o;return y(this,(function(u){switch(u.label){case 0:return Q(r("string",e)).throw(_.invalidParameters),t=T.of(this._iid).requestQueue,n=new Fe({channelUrl:this.url,channelType:this.channelType,keys:e}),[4,t.send(n)];case 1:return a=u.sent(),i=a.as(Qe),s=i.metadata,o=i.ts,this._upsertCachedMetaData(s,o),[2,s]}}))}))},l.prototype.getAllMetaData=function(){return v(this,void 0,void 0,(function(){var e,t,n,r,a,i;return y(this,(function(s){switch(s.label){case 0:return e=T.of(this._iid).requestQueue,t=new Fe({channelUrl:this.url,channelType:this.channelType,keys:[]}),[4,e.send(t)];case 1:return n=s.sent(),r=n.as(Qe),a=r.metadata,i=r.ts,this._upsertCachedMetaData(a,i),[2,a]}}))}))},l.prototype.createMetaData=function(e){return v(this,void 0,void 0,(function(){var t,n,r,a;return y(this,(function(i){switch(i.label){case 0:return t=T.of(this._iid).requestQueue,n=new H({channelUrl:this.url,channelType:this.channelType,metadata:e}),[4,t.send(n)];case 1:return r=i.sent(),a=r.as(Y).metaData,this._upsertCachedMetaData(a,0),[2,a]}}))}))},l.prototype.updateMetaData=function(e,t){return void 0===t&&(t=!1),v(this,void 0,void 0,(function(){var n,r,a,i,s,o;return y(this,(function(u){switch(u.label){case 0:return n=T.of(this._iid).requestQueue,r=new ze({channelUrl:this.url,channelType:this.channelType,metadata:e,upsert:t}),[4,n.send(r)];case 1:return a=u.sent(),i=a.as(xe),s=i.metadata,o=i.ts,this._upsertCachedMetaData(s,o),[2,s]}}))}))},l.prototype.deleteMetaData=function(e){return v(this,void 0,void 0,(function(){var n,r,a,i;return y(this,(function(s){switch(s.label){case 0:return Q(t("string",e)).throw(_.invalidParameters),n=T.of(this._iid).requestQueue,r=new Ve({channelUrl:this.url,channelType:this.channelType,key:e}),[4,n.send(r)];case 1:return a=s.sent(),i=a.as(je).ts,this._removeFromCachedMetaData([e],i),[2]}}))}))},l.prototype.deleteAllMetaData=function(){return v(this,void 0,void 0,(function(){var e,t,n,r;return y(this,(function(a){switch(a.label){case 0:return e=T.of(this._iid).requestQueue,t=new Be({channelUrl:this.url,channelType:this.channelType}),[4,e.send(t)];case 1:return n=a.sent(),r=n.as(We).ts,this._removeFromCachedMetaData(J([],X(this._cachedMetaData.keys()),!1),r),[2]}}))}))},l.prototype.getMetaCounters=function(e){return v(this,void 0,void 0,(function(){var t,n,a;return y(this,(function(i){switch(i.label){case 0:return Q(r("string",e)).throw(_.invalidParameters),t=T.of(this._iid).requestQueue,n=new Ke({channelUrl:this.url,channelType:this.channelType,keys:e}),[4,t.send(n)];case 1:return a=i.sent(),[2,a.as(Ye).metaCounter]}}))}))},l.prototype.getAllMetaCounters=function(){return v(this,void 0,void 0,(function(){var e,t,n;return y(this,(function(r){switch(r.label){case 0:return e=T.of(this._iid).requestQueue,t=new Ke({channelUrl:this.url,channelType:this.channelType,keys:[]}),[4,e.send(t)];case 1:return n=r.sent(),[2,n.as(Ye).metaCounter]}}))}))},l.prototype.createMetaCounters=function(e){return v(this,void 0,void 0,(function(){var t,n,r;return y(this,(function(a){switch(a.label){case 0:return t=T.of(this._iid).requestQueue,n=new He({channelUrl:this.url,channelType:this.channelType,metaCounter:e}),[4,t.send(n)];case 1:return r=a.sent(),[2,r.as(Je).metaCounter]}}))}))},l.prototype.updateMetaCounters=function(e,t){return void 0===t&&(t=!1),v(this,void 0,void 0,(function(){var n,r,a;return y(this,(function(i){switch(i.label){case 0:return n=T.of(this._iid).requestQueue,r=new Xe({channelUrl:this.url,channelType:this.channelType,metaCounter:e,upsert:t}),[4,n.send(r)];case 1:return a=i.sent(),[2,a.as(Ze).metaCounter]}}))}))},l.prototype.increaseMetaCounters=function(e){return v(this,void 0,void 0,(function(){var t,n,r;return y(this,(function(a){switch(a.label){case 0:return t=T.of(this._iid).requestQueue,n=new Xe({channelUrl:this.url,channelType:this.channelType,metaCounter:e,upsert:!1,mode:"increase"}),[4,t.send(n)];case 1:return r=a.sent(),[2,r.as(Ze).metaCounter]}}))}))},l.prototype.decreaseMetaCounters=function(e){return v(this,void 0,void 0,(function(){var t,n,r;return y(this,(function(a){switch(a.label){case 0:return t=T.of(this._iid).requestQueue,n=new Xe({channelUrl:this.url,channelType:this.channelType,metaCounter:e,upsert:!1,mode:"decrease"}),[4,t.send(n)];case 1:return r=a.sent(),[2,r.as(Ze).metaCounter]}}))}))},l.prototype.deleteMetaCounter=function(e){return v(this,void 0,void 0,(function(){var n,r;return y(this,(function(a){switch(a.label){case 0:return Q(t("string",e)).throw(_.invalidParameters),n=T.of(this._iid).requestQueue,r=new et({channelUrl:this.url,channelType:this.channelType,key:e}),[4,n.send(r)];case 1:return a.sent(),[2]}}))}))},l.prototype.deleteAllMetaCounters=function(){return v(this,void 0,void 0,(function(){var e,t;return y(this,(function(n){switch(n.label){case 0:return e=T.of(this._iid).requestQueue,t=new tt({channelUrl:this.url,channelType:this.channelType}),[4,e.send(t)];case 1:return n.sent(),[2]}}))}))},l.prototype.muteUser=function(e,t,n){return v(this,void 0,void 0,(function(){return y(this,(function(r){return[2,this.muteUserWithUserId(e.userId,t,n)]}))}))},l.prototype.muteUserWithUserId=function(e,n,r){return v(this,void 0,void 0,(function(){var a,i;return y(this,(function(s){switch(s.label){case 0:return Q(t("string",e)&&t("number",n,!0)&&t("string",r,!0)).throw(_.invalidParameters),a=T.of(this._iid).requestQueue,i=new nt({channelUrl:this.url,channelType:this.channelType,userId:e,seconds:n,description:r}),[4,a.send(i)];case 1:return s.sent(),[2]}}))}))},l.prototype.unmuteUser=function(e){return v(this,void 0,void 0,(function(){return y(this,(function(t){return[2,this.unmuteUserWithUserId(e.userId)]}))}))},l.prototype.unmuteUserWithUserId=function(e){return v(this,void 0,void 0,(function(){var n,r;return y(this,(function(a){switch(a.label){case 0:return Q(t("string",e)).throw(_.invalidParameters),n=T.of(this._iid).requestQueue,r=new at({channelUrl:this.url,channelType:this.channelType,userId:e}),[4,n.send(r)];case 1:return a.sent(),[2]}}))}))},l.prototype.banUser=function(e,t,n){return v(this,void 0,void 0,(function(){return y(this,(function(r){return[2,this.banUserWithUserId(e.userId,t,n)]}))}))},l.prototype.banUserWithUserId=function(e,n,r){return v(this,void 0,void 0,(function(){var a,i;return y(this,(function(s){switch(s.label){case 0:return Q(t("string",e)&&t("number",n,!0)&&t("string",r,!0)).throw(_.invalidParameters),a=T.of(this._iid).requestQueue,i=new st({channelUrl:this.url,channelType:this.channelType,userId:e,seconds:n,description:r}),[4,a.send(i)];case 1:return s.sent(),[2]}}))}))},l.prototype.unbanUser=function(e){return v(this,void 0,void 0,(function(){return y(this,(function(t){return[2,this.unbanUserWithUserId(e.userId)]}))}))},l.prototype.unbanUserWithUserId=function(e){return v(this,void 0,void 0,(function(){var n,r;return y(this,(function(a){switch(a.label){case 0:return Q(t("string",e)).throw(_.invalidParameters),n=T.of(this._iid).requestQueue,r=new ut({channelUrl:this.url,channelType:this.channelType,userId:e}),[4,n.send(r)];case 1:return a.sent(),[2]}}))}))},l.prototype.freeze=function(){return v(this,void 0,void 0,(function(){var e,t;return y(this,(function(n){switch(n.label){case 0:return e=T.of(this._iid).requestQueue,t=new lt({channelUrl:this.url,channelType:this.channelType,freezing:!0}),[4,e.send(t)];case 1:return n.sent(),this.isFrozen=!0,[2]}}))}))},l.prototype.unfreeze=function(){return v(this,void 0,void 0,(function(){var e,t;return y(this,(function(n){switch(n.label){case 0:return e=T.of(this._iid).requestQueue,t=new lt({channelUrl:this.url,channelType:this.channelType,freezing:!1}),[4,e.send(t)];case 1:return n.sent(),this.isFrozen=!1,[2]}}))}))},l.prototype.getMessagesByTimestamp=function(e,n){return v(this,void 0,void 0,(function(){return y(this,(function(r){switch(r.label){case 0:return n=u(u({},Z),n),Q(t("number",e)&&$(n)).throw(_.invalidParameters),[4,B.of(this._iid).getMessagesByTimestamp(this.url,this.channelType,e,n)];case 1:return[2,r.sent()]}}))}))},l.prototype.getMessageChangeLogsSinceTimestamp=function(e,n){return v(this,void 0,void 0,(function(){return y(this,(function(r){switch(r.label){case 0:return n=u(u({},ee),n),Q(t("number",e)&&te(n)).throw(_.invalidParameters),[4,B.of(this._iid).getMessageChangelogs(this.url,this.channelType,e,n)];case 1:return[2,r.sent()]}}))}))},l.prototype.getMessageChangeLogsSinceToken=function(e,n){return v(this,void 0,void 0,(function(){return y(this,(function(r){switch(r.label){case 0:return n=u(u({},ee),n),Q(t("string",e)&&te(n)).throw(_.invalidParameters),[4,B.of(this._iid).getMessageChangelogs(this.url,this.channelType,e,n)];case 1:return[2,r.sent()]}}))}))},l.prototype._createPendingSendableMessagePayload=function(e,t,n){var r=T.of(this._iid).sessionManager;return c({channel_url:this.url,channel_type:this.channelType,msg_id:0,parent_message_id:e.parentMessageId,data:e.data,custom_type:e.customType,mention_type:e.mentionType,sorted_metaarray:e.metaArrays?e.metaArrays.map((function(e){return i.payloadify(e)})):null,apple_critical_alert_options:e.appleCriticalAlertOptions?o.payloadify(e.appleCriticalAlertOptions):null,created_at:n,user:q.payloadify(r.currentUser),req_id:t,request_state:N.PENDING,mentioned_user_ids:e.mentionedUserIds,mentioned_users:e.mentionedUsers})},l.prototype._createPendingUserMessage=function(e,t,n){var r,a,i={};if(e.translationTargetLanguages)try{for(var s=k(e.translationTargetLanguages),o=s.next();!o.done;o=s.next()){i[o.value]=""}}catch(e){r={error:e}}finally{try{o&&!o.done&&(a=s.return)&&a.call(s)}finally{if(r)throw r.error}}var l=c(u(u({},this._createPendingSendableMessagePayload(e,t,n)),{type:O.USER,message:e.message,translations:i})),d=new M(this._iid,l);return d.messageParams=e,d},l.prototype._createPendingFileMessage=function(e,t,n){var r=c(u(u({},this._createPendingSendableMessagePayload(e,t,n)),{type:O.FILE,url:e.fileUrl,file:{name:e.fileName,size:e.fileSize,type:e.mimeType,data:e.data},thumbnails:e.thumbnailSizes?e.thumbnailSizes.map((function(e){return{url:"",width:e.maxWidth,height:e.maxHeight}})):[]})),a=new C(this._iid,r);return a.messageParams=e,a},l.prototype._markMessageAsFailed=function(e,t){var n=T.of(this._iid).cacheContext;e.errorCode=t.code,n.localCacheEnabled&&L(t.code)||(e.sendingStatus=t.code!==F.REQUEST_CANCELED?N.FAILED:N.CANCELED)},l.prototype.sendUserMessage=function(e){return e=u(u({},ce),e),Q(le(e)).throw(_.invalidParameters),this._sendUserMessage(e)},l.prototype._sendUserMessage=function(e,t,n){var r=this;void 0===t&&(t=Date.now()),void 0===n&&(n=null);var a=T.of(this._iid),i=a.dispatcher,s=a.requestQueue,o=n,c=new W;if(!o){o=this._generateRequestId();var l=T.of(this._iid).dispatcher;z(2).then((function(){var n=r._createPendingUserMessage(e,o,t);l.dispatch(new x({messages:[n],source:G.EVENT_MESSAGE_SENT_PENDING})),V((function(){return v(r,void 0,void 0,(function(){return y(this,(function(e){return[2,c._trigger(null,n)]}))}))}))})).catch((function(e){throw e}))}var d=new mt(u({channelUrl:this.url,channelType:this.channelType,reqId:o},e));return s.send(d).then((function(e){var t=e.as(vt).message;i.dispatch(new x({messages:[t],source:G.EVENT_MESSAGE_SENT_SUCCESS})),V((function(){return v(r,void 0,void 0,(function(){return y(this,(function(e){return[2,c._trigger(null,t)]}))}))}))})).catch((function(n){if(j(n))throw n;z(2).then((function(){var a=r._createPendingUserMessage(e,o,t);r._markMessageAsFailed(a,n),i.dispatch(new x({messages:[a],source:a.sendingStatus===N.PENDING?G.REQUEST_RESEND_MESSAGE:G.EVENT_MESSAGE_SENT_FAILED})),V((function(){return v(r,void 0,void 0,(function(){return y(this,(function(e){return[2,c._trigger(n,a)]}))}))}))})).catch((function(e){throw e}))})),c},l.prototype._autoResendUserMessage=function(e){return Q(e instanceof M).throw(_.invalidParameters),this._sendUserMessage(e.messageParams,e.createdAt,e.reqId)},l.prototype.resendUserMessage=function(e){var t;return v(this,void 0,void 0,(function(){var n,r;return y(this,(function(a){var i;return Q(e instanceof M).throw(_.invalidParameters),n=new ne,r=null!==(t=e.messageParams)&&void 0!==t?t:c({data:(i=e).data,customType:i.customType,mentionType:i.mentionType,mentionedUsers:i.mentionedUsers,mentionedUserIds:i.mentionedUserIds,mentionedMessageTemplate:i.mentionedMessageTemplate,metaArrays:i.metaArrays,parentMessageId:i.parentMessageId,appleCriticalAlertOptions:i.appleCriticalAlertOptions,message:i.message,translationTargetLanguages:Object.keys(i.translations)}),this._sendUserMessage(r).onFailed((function(e){return n.reject(e)})).onSucceeded((function(e){return n.resolve(e)})),[2,n.promise]}))}))},l.prototype.updateUserMessage=function(e,n){return v(this,void 0,void 0,(function(){var r,a,i,s,o,c;return y(this,(function(l){switch(l.label){case 0:return n=u(u({},Ie),n),Q(t("number",e)&&we(n)).throw(_.invalidParameters),r=T.of(this._iid),a=r.dispatcher,i=r.requestQueue,s=new yt(u({channelType:this.channelType,channelUrl:this.url,messageId:e},n)),[4,i.send(s)];case 1:return o=l.sent(),c=o.as(gt).message,a.dispatch(new x({messages:[c],source:G.EVENT_MESSAGE_UPDATED})),[2,c]}}))}))},l.prototype.copyUserMessage=function(e,t){var n,r,a;return v(this,void 0,void 0,(function(){var i,o;return y(this,(function(c){return Q(e instanceof l&&t instanceof M&&e.url===t.channelUrl).throw(_.invalidParameters),i=new ne,o=null!==(n=t.messageParams)&&void 0!==n?n:u(u({},t),{mentionType:t.mentionType,mentionedUserIds:null!==(r=t.mentionedUserIds)&&void 0!==r?r:null===(a=t.mentionedUsers)||void 0===a?void 0:a.map((function(e){return e.userId})),translationTargetLanguages:Object.keys(t.translations),pushNotificationDeliveryOption:s.DEFAULT,parentMessageId:null,isReplyToChannel:!1}),e._sendUserMessage(o).onSucceeded((function(e){return i.resolve(e)})).onFailed((function(e){return i.reject(e)})),[2,i.promise]}))}))},l.prototype.translateUserMessage=function(e,t){return v(this,void 0,void 0,(function(){var n,a,i;return y(this,(function(s){switch(s.label){case 0:return Q(e instanceof M&&e.messageId>0&&r("string",t)).throw(_.invalidParameters),n=T.of(this._iid).requestQueue,a=new St({channelType:this.channelType,channelUrl:this.url,messageId:e.messageId,translationTargetLanguages:t}),[4,n.send(a)];case 1:return i=s.sent(),[2,i.as(Ct).message]}}))}))},l.prototype.sendFileMessage=function(e){return e=u(u({},me),e),Q(ve(e)).throw(_.invalidParameters),this._sendFileMessage(e)},l.prototype._sendFileMessage=function(e,t,n){var r=this;void 0===t&&(t=Date.now()),void 0===n&&(n=null);var a=T.of(this._iid).dispatcher,i=B.of(this._iid).fileMessageQueue,s=n,o=new W;return s||(s=this._generateRequestId(),z(2).then((function(){var n=r._createPendingFileMessage(e,s,t);a.dispatch(new x({messages:[n],source:G.EVENT_MESSAGE_SENT_PENDING})),V((function(){return v(r,void 0,void 0,(function(){return y(this,(function(e){return[2,o._trigger(null,n)]}))}))}))})).catch((function(e){throw e}))),i.request(this,s,e).then((function(e){a.dispatch(new x({messages:[e],source:G.EVENT_MESSAGE_SENT_SUCCESS})),V((function(){return v(r,void 0,void 0,(function(){return y(this,(function(t){return[2,o._trigger(null,e)]}))}))}))})).catch((function(n){if(j(n))throw n;z(2).then((function(){var i=r._createPendingFileMessage(e,s,t);r._markMessageAsFailed(i,n),a.dispatch(new x({messages:[i],source:i.sendingStatus===N.PENDING?G.REQUEST_RESEND_MESSAGE:G.EVENT_MESSAGE_SENT_FAILED})),V((function(){return v(r,void 0,void 0,(function(){return y(this,(function(e){return[2,o._trigger(n,i)]}))}))}))})).catch((function(e){throw e}))})),o},l.prototype._autoResendFileMessage=function(e){Q(e instanceof C).throw(_.invalidParameters);var t=T.of(this._iid).logger;return t.debug("autoResendFileMessage pending",e),this._sendFileMessage(e.messageParams,e.createdAt,e.reqId).onFailed((function(e){t.debug("autoResendFileMessage failed",e)})).onSucceeded((function(e){t.debug("autoResendFileMessage success",e)}))},l.prototype.sendFileMessages=function(e){var t,n;Q(e.every((function(e){return ve(u(u({},me),e))}))).throw(_.invalidParameters);var r=new W;try{for(var a=k(e),i=a.next();!i.done;i=a.next()){var s=i.value;this.sendFileMessage(s).onPending((function(e){return r._trigger(null,e)})).onFailed((function(e,t){return r._trigger(e,t)})).onSucceeded((function(e){return r._trigger(null,e)}))}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return r},l.prototype.resendFileMessage=function(e,t){var n;return v(this,void 0,void 0,(function(){var r,a;return y(this,(function(i){return Q(e instanceof C&&t instanceof Blob).throw(_.invalidParameters),r=new ne,a=null!==(n=e.messageParams)&&void 0!==n?n:function(e,t){return void 0===t&&(t=null),c({data:e.data,customType:e.customType,mentionType:e.mentionType,mentionedUsers:e.mentionedUsers,mentionedUserIds:e.mentionedUserIds,metaArrays:e.metaArrays,parentMessageId:e.parentMessageId,appleCriticalAlertOptions:e.appleCriticalAlertOptions,file:t,fileUrl:e.url,fileName:e.name,fileSize:e.size,mimeType:e.type,thumbnailSizes:e.thumbnails.map((function(e){return{maxWidth:e.width,maxHeight:e.height}}))})}(e,t),this._sendFileMessage(a).onFailed((function(e){return r.reject(e)})).onSucceeded((function(e){return r.resolve(e)})),[2,r.promise]}))}))},l.prototype.updateFileMessage=function(e,n){return v(this,void 0,void 0,(function(){var r,a,i,s,o,c;return y(this,(function(l){switch(l.label){case 0:return n=u(u({},Ee),n),Q(t("number",e)&&function(e){return Ue(e)}(n)).throw(_.invalidParameters),r=T.of(this._iid),a=r.dispatcher,i=r.requestQueue,s=new _t(u({channelType:this.channelType,channelUrl:this.url,messageId:e},n)),[4,i.send(s)];case 1:return o=l.sent(),c=o.as(Tt).message,a.dispatch(new x({messages:[c],source:G.EVENT_MESSAGE_UPDATED})),[2,c]}}))}))},l.prototype.cancelUploadingFileMessage=function(e){return v(this,void 0,void 0,(function(){return y(this,(function(n){return Q(t("string",e)).throw(_.invalidParameters),B.of(this._iid).fileMessageQueue.cancel(this,e),[2,!0]}))}))},l.prototype.copyFileMessage=function(e,t){var n,r;return v(this,void 0,void 0,(function(){var a,i;return y(this,(function(o){return Q(e instanceof l&&t instanceof C&&e.url===t.channelUrl).throw(_.invalidParameters),a=new ne,i=u(u({},t),{fileUrl:t.url,fileName:t.name,fileSize:t.size,mimeType:t.type,mentionType:t.mentionType,mentionedUserIds:null!==(n=t.mentionedUserIds)&&void 0!==n?n:null===(r=t.mentionedUsers)||void 0===r?void 0:r.map((function(e){return e.userId})),pushNotificationDeliveryOption:s.DEFAULT,parentMessageId:null,isReplyToChannel:!1,thumbnailSizes:t.thumbnails.map((function(e){return{maxWidth:e.width,maxHeight:e.height}})),requireAuth:t.requireAuth}),e._sendFileMessage(i).onSucceeded((function(e){return a.resolve(e)})).onFailed((function(e){return a.reject(e)})),[2,a.promise]}))}))},l.prototype.deleteMessage=function(e){return v(this,void 0,void 0,(function(){var t,n;return y(this,(function(r){switch(r.label){case 0:return Q(e instanceof re).throw(_.invalidParameters),e.messageId>0?(t=T.of(this._iid).requestQueue,n=new Ut({channelType:this.channelType,channelUrl:this.url,messageId:e.messageId}),[4,t.send(n)]):[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},l.prototype.addReaction=function(e,n){return v(this,void 0,void 0,(function(){var r,a,i;return y(this,(function(s){switch(s.label){case 0:return Q(e instanceof ae&&e.messageId>0&&t("string",n)).throw(_.invalidParameters),r=T.of(this._iid).requestQueue,a=new wt({channelType:this.channelType,channelUrl:this.url,messageId:e.messageId,reactionKey:n}),[4,r.send(a)];case 1:return i=s.sent(),[2,i.as(Et).reactionEvent]}}))}))},l.prototype.deleteReaction=function(e,n){return v(this,void 0,void 0,(function(){var r,a,i;return y(this,(function(s){switch(s.label){case 0:return Q(e instanceof ae&&e.messageId>0&&t("string",n)).throw(_.invalidParameters),r=T.of(this._iid).requestQueue,a=new Mt({channelType:this.channelType,channelUrl:this.url,messageId:e.messageId,reactionKey:n}),[4,r.send(a)];case 1:return i=s.sent(),[2,i.as(bt).reactionEvent]}}))}))},l.prototype._updateMessageMetaArray=function(e,t,n,r){return v(this,void 0,void 0,(function(){var a,i,s,o,u,c;return y(this,(function(l){switch(l.label){case 0:return a=T.of(this._iid),i=a.dispatcher,s=a.requestQueue,o=new yt({channelType:this.channelType,channelUrl:this.url,messageId:e,metaArrayParams:{array:t,mode:n,upsert:r}}),[4,s.send(o)];case 1:return u=l.sent(),c=u.as(gt).message,i.dispatch(new x({messages:[c],source:G.EVENT_MESSAGE_UPDATED})),[2,c]}}))}))},l.prototype.createMessageMetaArrayKeys=function(e,t){return v(this,void 0,void 0,(function(){var n;return y(this,(function(a){return Q(e instanceof re&&e.messageId>0&&r("string",t)).throw(_.invalidParameters),n=t.map((function(e){return new i({key:e})})),[2,this._updateMessageMetaArray(e.messageId,n,"add",!0)]}))}))},l.prototype.deleteMessageMetaArrayKeys=function(e,t){return v(this,void 0,void 0,(function(){var n;return y(this,(function(a){return Q(e instanceof re&&e.messageId>0&&r("string",t)).throw(_.invalidParameters),n=t.map((function(e){return new i({key:e})})),[2,this._updateMessageMetaArray(e.messageId,n,"remove",!0)]}))}))},l.prototype.addMessageMetaArrayValues=function(e,t){return v(this,void 0,void 0,(function(){return y(this,(function(n){return Q(e instanceof re&&e.messageId>0&&t.every((function(e){return e instanceof i}))).throw(_.invalidParameters),[2,this._updateMessageMetaArray(e.messageId,t,"add",!0)]}))}))},l.prototype.removeMessageMetaArrayValues=function(e,t){return v(this,void 0,void 0,(function(){return y(this,(function(n){return Q(e instanceof re&&e.messageId>0&&t.every((function(e){return e instanceof i}))).throw(_.invalidParameters),[2,this._updateMessageMetaArray(e.messageId,t,"remove",!0)]}))}))},l.prototype.report=function(e,r){return v(this,void 0,void 0,(function(){var a,i,s,o;return y(this,(function(u){switch(u.label){case 0:return Q(n(ye,e)&&t("string",r)).throw(_.invalidParameters),a=T.of(this._iid),i=a.sdkState,s=a.requestQueue,o=new ht({channelUrl:this.url,channelType:this.channelType,userId:i.userId,category:e,description:r}),[4,s.send(o)];case 1:return u.sent(),[2]}}))}))},l.prototype.reportUser=function(e,r,i){return v(this,void 0,void 0,(function(){var s,o,u,c;return y(this,(function(l){switch(l.label){case 0:return Q(e instanceof a&&n(ye,r)&&t("string",i)).throw(_.invalidParameters),s=T.of(this._iid),o=s.sdkState,u=s.requestQueue,c=new pt({channelUrl:this.url,channelType:this.channelType,userId:o.userId,offendingUserId:e.userId,category:r,description:i}),[4,u.send(c)];case 1:return l.sent(),[2]}}))}))},l.prototype.reportMessage=function(e,r,a){return v(this,void 0,void 0,(function(){var i,s,o,u;return y(this,(function(c){switch(c.label){case 0:return Q(e instanceof re&&n(ye,r)&&t("string",a)).throw(_.invalidParameters),i=T.of(this._iid),s=i.sdkState,o=i.requestQueue,u=new ft({channelUrl:this.url,channelType:this.channelType,userId:s.userId,offendingUserId:e.sender.userId,messageId:e.messageId,category:r,description:a}),[4,o.send(u)];case 1:return c.sent(),[2]}}))}))},l}(K);export{qe as B,It as D,ie as F,Pe as M,Se as O,ye as R,$e as U,At as a,_e as b,ge as c,de as d,fe as e,pe as f,Ge as g,dt as h,he as i,ct as j,ot as k,rt as l,it as m,gt as n,Tt as o,vt as p,ce as q,se as r,ue as s,oe as t,Te as u,le as v,Ue as w,Ie as x,we as y};
