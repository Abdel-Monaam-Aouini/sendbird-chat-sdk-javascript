import{h as e,e as t,_ as n,l as r,U as a,ae as i,i as s,K as o,af as u,ag as c,ah as l,A as d,g as h,b as p,c as f,j as m,k as v,n as y,S as g,V as _,W as U,ai as T,aj as I,C as w,ak as M,al as E,am as S,an as P,F as C,ao as b,ap as A,aq as D,a7 as q,ar as R,as as k,at as F,au as N,z as Q,av as L,aw as O,ax as z,u as G,ay as x,az as V,aA as j,M as W,a2 as B,aB as K,aC as Y,aD as H,aE as J,x as X,aF as Z,I as $,O as ee,Q as te,aG as ne,aH as re,aI as ae,aJ as ie,aK as se,aL as oe,q as ue,aM as ce,aN as le,aO as de}from"./__bundle-6af37134.js";var he;!function(e){e.MUTED="muted",e.BANNED="banned"}(he||(he={}));var pe,fe=function(){function n(t){var n,r,a;this.restrictionType=null,this.description=null,this.endAt=-1,e(he,t.restriction_type)&&(this.restrictionType=t.restriction_type),this.description=null!==(n=t.description)&&void 0!==n?n:null,this.endAt=null!==(a=null!==(r=t.end_at)&&void 0!==r?r:t.muted_end_at)&&void 0!==a?a:-1}return n.payloadify=function(e){return e?t({restriction_type:e.restrictionType,description:e.description,end_at:e.endAt}):null},n}(),me=function(e){function a(t,n){var r=e.call(this,t,n)||this;return r.restrictionInfo=null,r.restrictionInfo=new fe(n),r}return n(a,e),a.payloadify=function(n){return n?t(r(r({},e.payloadify.call(this,n)),fe.payloadify(n.restrictionInfo))):null},a}(a),ve={data:null,customType:null,mentionType:i.USERS,mentionedUserIds:null,mentionedUsers:null,mentionedMessageTemplate:null,metaArrays:null,pushNotificationDeliveryOption:null,appleCriticalAlertOptions:null},ye=function(t){return s("string",t.data,!0)&&s("string",t.customType,!0)&&e(i,t.mentionType)&&o("string",t.mentionedUserIds,!0)&&o(a,t.mentionedUsers,!0)&&s("string",t.mentionedMessageTemplate,!0)&&o(u,t.metaArrays,!0)&&e(c,t.pushNotificationDeliveryOption,!0)&&s(l,t.appleCriticalAlertOptions,!0)},ge=r(r({},ve),{message:null,translationTargetLanguages:null,pollId:null}),_e=function(e){return ye(e)&&s("string",e.message,!0)&&o("string",e.translationTargetLanguages,!0)&&s("number",e.pollId,!0)},Ue=r({},ve),Te=function(e){function t(t){var n=t.channelUrl,r=t.channelType,a=t.token,i=t.limit,s=e.call(this)||this;return s.method=d.GET,s.path="".concat(h(r),"/").concat(encodeURIComponent(n),"/operators"),s.params={token:a,limit:i},s}return n(t,e),t}(p),Ie=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.operators=n.operators.map((function(e){return new a(t,e)})),r.token=n.next,r}return n(t,e),t}(f),we=function(e){function t(t,n,r,a){return e.call(this,t,n,r,a)||this}return n(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)},t.prototype.next=function(){return m(this,void 0,void 0,(function(){var e,t,n,a,i,s,o;return v(this,(function(u){switch(u.label){case 0:return this._validate()?this._isLoading?[3,3]:(e=[],this._hasNext?(this._isLoading=!0,t=_.of(this._iid).requestQueue,n=new Te(r(r({},this),{channelUrl:this.channelUrl,token:this._token})),[4,t.send(n)]):[3,2]):[3,5];case 1:return a=u.sent(),i=a.as(Ie),s=i.operators,o=i.token,this._token=o,this._hasNext=!!o,this._isLoading=!1,[2,s];case 2:return[2,e];case 3:throw g.queryInProgress;case 4:return[3,6];case 5:throw g.invalidParameters;case 6:return[2]}}))}))},t}(y),Me=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.limit,s=t.token;return(n=e.call(this)||this).method=d.GET,n.path="".concat(h(a),"/").concat(encodeURIComponent(r),"/mute"),n.params={limit:i,token:s},n}return n(t,e),t}(p),Ee=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.token=null,r.mutedUsers=[];var a=n.next,i=n.muted_list;return r.token=a,i&&i.length>0&&(r.mutedUsers=i.map((function(e){return new me(t,e)}))),r}return n(t,e),t}(f),Se=function(e){function t(t,n,r,a){return e.call(this,t,n,r,a)||this}return n(t,e),t.prototype.next=function(){return m(this,void 0,void 0,(function(){var e,t,n,a,i,s;return v(this,(function(o){switch(o.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=_.of(this._iid).requestQueue,t=new Me(r(r({},this),{token:this._token})),[4,e.send(t)]):[3,2]:[3,5];case 1:return n=o.sent(),a=n.as(Ee),i=a.mutedUsers,s=a.token,this._token=s,this._hasNext=!!s,this._isLoading=!1,[2,i];case 2:return[2,[]];case 3:throw g.queryInProgress;case 4:return[3,6];case 5:throw g.invalidParameters;case 6:return[2]}}))}))},t}(y),Pe=function(e){function r(n){var r=this,a=n.channelUrl,i=n.channelType,s=n.limit,o=n.token;return(r=e.call(this)||this).method=d.GET,r.path="".concat(h(i),"/").concat(encodeURIComponent(a),"/ban"),r.params=t({limit:s,token:o}),r}return n(r,e),r}(p),Ce=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.token=null,r.bannedUsers=[];var a=n.next,i=n.banned_list;return r.token=a,i&&i.length>0&&(r.bannedUsers=i.map((function(e){return new me(t,e.user)}))),r}return n(t,e),t}(f),be=function(e){function t(t,n,r,a){return e.call(this,t,n,r,a)||this}return n(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)},t.prototype.next=function(){return m(this,void 0,void 0,(function(){var e,t,n,a,i,s;return v(this,(function(o){switch(o.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=_.of(this._iid).requestQueue,t=new Pe(r(r({},this),{token:this._token})),[4,e.send(t)]):[3,2]:[3,5];case 1:return n=o.sent(),a=n.as(Ce),i=a.bannedUsers,s=a.token,this._token=s,this._hasNext=!!s,this._isLoading=!1,[2,i];case 2:return[2,[]];case 3:throw g.queryInProgress;case 4:return[3,6];case 5:throw g.invalidParameters;case 6:return[2]}}))}))},t}(y);!function(e){e.SPAM="spam",e.HARASSING="harassing",e.SUSPICIOUS="suspicious",e.INAPPROPRIATE="inappropriate"}(pe||(pe={}));var Ae=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.operatorUserIds;return(n=e.call(this)||this).method=d.POST,n.path="".concat(h(a),"/").concat(encodeURIComponent(r),"/operators"),n.params={operator_ids:i},n}return n(t,e),t}(p);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e)}(f);var De=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.operatorUserIds;return(n=e.call(this)||this).method=d.DELETE,n.path="".concat(h(a),"/").concat(encodeURIComponent(r),"/operators"),n.params={operator_ids:i},n}return n(t,e),t}(p);!function(e){function t(t,n){return e.call(this,t,n)||this}n(t,e)}(f);var qe=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.userId;return(n=e.call(this)||this).method=d.GET,n.path="".concat(h(a),"/").concat(encodeURIComponent(r),"/mute/").concat(i),n}return n(t,e),t}(p),Re=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.isMuted=!1,r.startAt=null,r.endAt=null,r.remainingDuration=null,r.description=null;var a=n.is_muted,i=n.start_at,s=n.end_at,o=n.remaining_duration,u=n.description;return r.isMuted=a,r.startAt=i,r.endAt=s,r.remainingDuration=o,r.description=u,r}return n(t,e),t}(f),ke=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.keys;return(n=e.call(this)||this).method=d.GET,n.path="".concat(h(a),"/").concat(encodeURIComponent(r),"/metadata"),n.params={keys:i,include_ts:!0},n}return n(t,e),t}(p),Fe=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.ts=null;var a=n.metadata,i=n.ts;return r.metadata=a,r.ts=null!=i?i:null,r}return n(t,e),t}(f),Ne=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.metadata;return(n=e.call(this)||this).method=d.POST,n.path="".concat(h(a),"/").concat(encodeURIComponent(r),"/metadata"),n.params={metadata:i,include_ts:!0},n}return n(t,e),t}(p),Qe=function(e){function t(t,n){var r,a,i=this;return(i=e.call(this,t,n)||this).metaData=null!==(r=n.metadata)&&void 0!==r?r:{},i.ts=null!==(a=n.ts)&&void 0!==a?a:null,i}return n(t,e),t}(f),Le=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.metadata,s=t.upsert;return(n=e.call(this)||this).method=d.PUT,n.path="".concat(h(a),"/").concat(encodeURIComponent(r),"/metadata"),n.params={metadata:i,include_ts:!0,upsert:null!=s&&s},n}return n(t,e),t}(p),Oe=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.ts=null;var a=n.metadata,i=n.ts;return r.metadata=a,r.ts=null!=i?i:null,r}return n(t,e),t}(f),ze=function(e){function t(t,n,r){var a=e.call(this,t,"SYEV",r)||this;return a.created=null,a.updated=null,a.deleted=null,r.data&&(a.created=r.data.created,a.updated=r.data.updated,a.deleted=r.data.deleted),a}return n(t,e),t}(U),Ge=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.key;return(n=e.call(this)||this).method=d.DELETE,n.path="".concat(h(a),"/").concat(encodeURIComponent(r),"/metadata/").concat(i),n.params={include_ts:!0},n}return n(t,e),t}(p),xe=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.ts=null;var a=n.ts;return r.ts=null!=a?a:null,r}return n(t,e),t}(f),Ve=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType;return(n=e.call(this)||this).method=d.DELETE,n.path="".concat(h(a),"/").concat(encodeURIComponent(r),"/metadata"),n.params={include_ts:!0},n}return n(t,e),t}(p),je=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.ts=null;var a=n.ts;return r.ts=null!=a?a:null,r}return n(t,e),t}(f),We=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.keys;return(n=e.call(this)||this).method=d.GET,n.path="".concat(h(a),"/").concat(encodeURIComponent(r),"/metacounter"),n.params={keys:i},n}return n(t,e),t}(p),Be=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.metaCounter=n,r}return n(t,e),t}(f),Ke=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.metaCounter;return(n=e.call(this)||this).method=d.POST,n.path="".concat(h(a),"/").concat(encodeURIComponent(r),"/metacounter"),n.params={metacounter:i},n}return n(t,e),t}(p),Ye=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.metaCounter=n,r}return n(t,e),t}(f),He=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.metaCounter,s=t.upsert,o=void 0!==s&&s,u=t.mode,c=void 0===u?"set":u;return(n=e.call(this)||this).method=d.PUT,n.path="".concat(h(a),"/").concat(encodeURIComponent(r),"/metacounter"),n.params={metacounter:i,upsert:o,mode:c},n}return n(t,e),t}(p),Je=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.metaCounter=n,r}return n(t,e),t}(f),Xe=function(e){function t(t,n,r){var a=e.call(this,t,"SYEV",r)||this;return a.created=null,a.updated=null,a.deleted=null,r.data&&(a.created=r.data.created,a.updated=r.data.updated,a.deleted=r.data.deleted),a}return n(t,e),t}(U),Ze=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.key;return(n=e.call(this)||this).method=d.DELETE,n.path="".concat(h(a),"/").concat(encodeURIComponent(r),"/metacounter/").concat(i),n.params=null,n}return n(t,e),t}(p);!function(e){function t(t,n){return e.call(this,t,n)||this}n(t,e)}(f);var $e=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType;return(n=e.call(this)||this).method=d.DELETE,n.path="".concat(h(a),"/").concat(encodeURIComponent(r),"/metacounter"),n.params=null,n}return n(t,e),t}(p);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e)}(f);var et=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.userId,s=t.seconds,o=t.description;return(n=e.call(this)||this).method=d.POST,n.path="".concat(h(a),"/").concat(encodeURIComponent(r),"/mute"),n.params={user_id:i,seconds:s,description:o},n}return n(t,e),t}(p);!function(e){function t(t,n){return e.call(this,t,n)||this}n(t,e)}(f);var tt=function(e){function t(t,n,r){var a=e.call(this,t,"SYEV",r)||this;return a.user=new me(t,r.data),a}return n(t,e),t}(U),nt=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.userId;return(n=e.call(this)||this).method=d.DELETE,n.path="".concat(h(a),"/").concat(encodeURIComponent(r),"/mute/").concat(encodeURIComponent(i)),n}return n(t,e),t}(p);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e)}(f);var rt=function(e){function t(t,n,r){var a=e.call(this,t,"SYEV",r)||this;return a.user=new me(t,r.data),a}return n(t,e),t}(U),at=function(e){function r(n){var r=this,a=n.channelUrl,i=n.channelType,s=n.userId,o=n.seconds,u=n.description;return(r=e.call(this)||this).method=d.POST,r.path="".concat(h(i),"/").concat(encodeURIComponent(a),"/ban"),r.params=t({user_id:s,seconds:o,description:u}),r}return n(r,e),r}(p);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e)}(f);var it=function(e){function t(t,n,r){var a=e.call(this,t,"SYEV",r)||this;return a.memberCount=null,a.joinedMemberCount=null,a.user=new me(t,r.data),r.data.member_count&&(a.memberCount=r.data.member_count),r.data.joined_member_count&&(a.joinedMemberCount=r.data.joined_member_count),a}return n(t,e),t}(U),st=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.userId;return(n=e.call(this)||this).method=d.DELETE,n.path="".concat(h(a),"/").concat(encodeURIComponent(r),"/ban/").concat(encodeURIComponent(i)),n}return n(t,e),t}(p);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e)}(f);var ot=function(e){function t(t,n,r){var a=e.call(this,t,"SYEV",r)||this;return a.user=new me(t,r.data),a}return n(t,e),t}(U),ut=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.freezing;return(n=e.call(this)||this).method=d.PUT,n.path="".concat(h(a),"/").concat(encodeURIComponent(r),"/freeze"),n.params={freeze:i},n}return n(t,e),t}(p);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e)}(f);var ct=function(e){function t(t,n,r){var a=e.call(this,t,"SYEV",r)||this;return a.freeze=r.data.freeze,a}return n(t,e),t}(U),lt=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.category,s=t.userId,o=t.description;return(n=e.call(this)||this).method=d.POST,n.path="".concat(T(a),"/").concat(encodeURIComponent(r)),n.params={report_category:i,reporting_user_id:s,report_description:o},n}return n(t,e),t}(p),dt=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.category,s=t.userId,o=t.offendingUserId,u=t.description;return(n=e.call(this)||this).method=d.POST,n.path="".concat(I,"/users/").concat(o),n.params={channel_url:r,channel_type:a===w.OPEN?"open_channels":"group_channels",report_category:i,reporting_user_id:s,report_description:u},n}return n(t,e),t}(p),ht=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.category,s=t.userId,o=t.offendingUserId,u=t.messageId,c=t.description;return(n=e.call(this)||this).method=d.POST,n.path="".concat(T(a),"/").concat(encodeURIComponent(r),"/messages/").concat(u),n.params={report_category:i,reporting_user_id:s,report_description:c,offending_user_id:o},n}return n(t,e),t}(p),pt=function(e){function r(n){var r=[];return n.mentionType===i.USERS&&(n.mentionedUserIds?r=n.mentionedUserIds:n.mentionedUsers&&(r=n.mentionedUsers.map((function(e){return e.userId})))),e.call(this,{code:"MESG",ackRequired:!0,payload:t({channel_url:n.channelUrl,message:n.message,data:n.data,custom_type:n.customType,metaarray:n.metaArrays,mention_type:n.mentionType,mentioned_user_ids:r,mentioned_message_template:n.mentionedMessageTemplate,target_langs:n.translationTargetLanguages,push_option:n.pushNotificationDeliveryOption&&n.pushNotificationDeliveryOption!==c.DEFAULT?n.pushNotificationDeliveryOption:void 0,apple_critical_alert_options:n.appleCriticalAlertOptions,silent:n.silent,reply_to_channel:n.isReplyToChannel,parent_message_id:n.parentMessageId>0?n.parentMessageId:null,req_id:n.reqId,poll_id:n.pollId,pin_message:n.isPinnedMessage})})||this}return n(r,e),r}(M),ft=function(e){function t(t,n,r){var a,i,s,o=this;(o=e.call(this,t,"MESG",r)||this).message=new E(t,r);var u=_.of(t).sdkState;return o.isMentioned=S(o.message.mentionType,null!==(a=o.message.mentionedUserIds)&&void 0!==a?a:null===(i=o.message.mentionedUsers)||void 0===i?void 0:i.map((function(e){return e.userId})),u.userId),o.forceUpdateLastMessage=null!==(s=r.force_update_last_message)&&void 0!==s&&s,o}return n(t,e),t}(U),mt=function(e){function r(n){var r,a=null;return n.mentionType===i.USERS&&(n.mentionedUserIds?a=n.mentionedUserIds:n.mentionedUsers&&(a=n.mentionedUsers.map((function(e){return e.userId})))),e.call(this,{code:"MEDI",ackRequired:!0,payload:t({channel_url:n.channelUrl,msg_id:n.messageId,message:n.message,data:n.data,custom_type:n.customType,metaarray:n.metaArrayParams,mention_type:n.mentionType,mentioned_user_ids:a,mentioned_message_template:n.mentionedMessageTemplate,apple_critical_alert_options:null===(r=n.appleCriticalAlertOptions)||void 0===r?void 0:r.serialize(),poll_id:n.pollId})})||this}return n(r,e),r}(M),vt=function(e){function t(t,n,r){var a,i,s,o,u,c,l=this;(l=e.call(this,t,"MEDI",r)||this).message=new E(t,r);var d=_.of(t).sdkState;return l.mentionCountChange=P({mentionType:null!==(i=null===(a=r.old_values)||void 0===a?void 0:a.mention_type)&&void 0!==i?i:null,mentionedUserIds:null!==(o=null===(s=r.old_values)||void 0===s?void 0:s.mentioned_user_ids)&&void 0!==o?o:[]},{mentionType:l.message.mentionType,mentionedUserIds:null!==(u=l.message.mentionedUserIds)&&void 0!==u?u:null===(c=l.message.mentionedUsers)||void 0===c?void 0:c.map((function(e){return e.userId}))},d.userId),l}return n(t,e),t}(U),yt=function(e){function r(n){var r=null;return n.mentionType===i.USERS&&(n.mentionedUserIds?r=n.mentionedUserIds:n.mentionedUsers&&(r=n.mentionedUsers.map((function(e){return e.userId})))),e.call(this,{code:"FEDI",ackRequired:!0,payload:t({channel_url:n.channelUrl,msg_id:n.messageId,data:n.data,custom_type:n.customType,metaarray:n.metaArrayParams,mention_type:n.mentionType,mentioned_user_ids:r,apple_critical_alert_options:n.appleCriticalAlertOptions})})||this}return n(r,e),r}(M),gt=function(e){function t(t,n,r){var a,i,s,o,u,c,l=this;(l=e.call(this,t,"FEDI",r)||this).message=new C(t,r);var d=_.of(t).sdkState;return l.mentionCountChange=P({mentionType:null!==(i=null===(a=r.old_values)||void 0===a?void 0:a.mention_type)&&void 0!==i?i:null,mentionedUserIds:null!==(o=null===(s=r.old_values)||void 0===s?void 0:s.mentioned_user_ids)&&void 0!==o?o:[]},{mentionType:l.message.mentionType,mentionedUserIds:null!==(u=l.message.mentionedUserIds)&&void 0!==u?u:null===(c=l.message.mentionedUsers)||void 0===c?void 0:c.map((function(e){return e.userId}))},d.userId),l}return n(t,e),t}(U),_t=function(e){function t(t){var n=e.call(this)||this;return n.method=d.DELETE,n.path="".concat(h(t.channelType),"/").concat(t.channelUrl,"/messages/").concat(t.messageId),n}return n(t,e),t}(p);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e)}(f);var Ut=function(e){function t(t,n,r){var a=e.call(this,t,"DELM",r)||this;return a.channelUrl=r.channel_url,a.channelType=r.channel_type,a.messageId=Number(r.msg_id),a}return n(t,e),t}(U),Tt=function(e){function t(t){var n=t.channelType,r=t.channelUrl,a=t.messageId,i=t.reactionKey,s=e.call(this)||this;return s.method=d.POST,s.path="".concat(h(n),"/").concat(encodeURIComponent(r),"/messages/").concat(a,"/reactions"),s.params={reaction:i},s}return n(t,e),t}(p),It=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.reactionEvent=new b(n),r}return n(t,e),t}(f),wt=function(e){function t(t){var n=t.channelType,r=t.channelUrl,a=t.messageId,i=t.reactionKey,s=e.call(this)||this;return s.method=d.DELETE,s.path="".concat(h(n),"/").concat(encodeURIComponent(r),"/messages/").concat(a,"/reactions"),s.params={reaction:i},s}return n(t,e),t}(p),Mt=function(e){function t(t,n){var a=e.call(this,t,n)||this;return a.reactionEvent=new b(r({},n)),a}return n(t,e),t}(f),Et=function(e){function t(t){var n=t.channelType,r=t.channelUrl,a=t.messageId,i=t.translationTargetLanguages,s=e.call(this)||this;return s.method=d.POST,s.path="".concat(h(n),"/").concat(encodeURIComponent(r),"/messages/").concat(encodeURIComponent(a),"/translation"),s.params={target_langs:i},s}return n(t,e),t}(p),St=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.message=new E(t,n),r}return n(t,e),t}(f),Pt=function(e){function t(t){var n,r=this;r=e.call(this)||this;var a=[];t.mentionType===i.USERS&&(t.mentionedUserIds?a=t.mentionedUserIds:t.mentionedUsers&&(a=t.mentionedUsers.map((function(e){return e.userId}))));var s=t.channelType,o=t.channelUrl;return r.method=d.POST,r.path="".concat(h(s),"/").concat(encodeURIComponent(o),"/scheduled_messages"),r.params={req_id:t.reqId,scheduled_at:t.scheduledAt,message_type:A.USER,message:t.message,custom_type:t.customType,data:t.data,mention_type:t.mentionType,mentioned_user_ids:a,sorted_metaarray:null===(n=t.metaArrays)||void 0===n?void 0:n.map((function(e){return u.payloadify(e)})),apple_critical_alert_options:l.payloadify(t.appleCriticalAlertOptions),target_langs:t.translationTargetLanguages,push_option:t.pushNotificationDeliveryOption},r}return n(t,e),t}(p),Ct=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.message=new E(t,n),r}return n(t,e),t}(f),bt=function(e){function t(t){var n,r=this;r=e.call(this)||this;var a=[];t.mentionType===i.USERS&&(t.mentionedUserIds?a=t.mentionedUserIds:t.mentionedUsers&&(a=t.mentionedUsers.map((function(e){return e.userId}))));var s=t.channelType,o=t.channelUrl;return r.method=d.POST,r.path="".concat(h(s),"/").concat(encodeURIComponent(o),"/scheduled_messages"),r.params={req_id:t.reqId,scheduled_at:t.scheduledAt,message_type:A.FILE,url:t.fileUrl,file_name:t.fileName,file_size:t.fileSize,file_type:t.mimeType,thumbnails:t.thumbnailSizes?t.thumbnailSizes.map((function(e){return D.payloadify(e)})):[],custom_type:t.customType,data:t.data,require_auth:t.requireAuth,mention_type:t.mentionType,mentioned_user_ids:a,sorted_metaarray:null===(n=t.metaArrays)||void 0===n?void 0:n.map((function(e){return u.payloadify(e)})),apple_critical_alert_options:l.payloadify(t.appleCriticalAlertOptions),push_option:t.pushNotificationDeliveryOption},r}return n(t,e),t}(p),At=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.message=new C(t,n),r}return n(t,e),t}(f),Dt=2,qt=function(i){function d(e,t){var n,r,o,u,c=this;return(c=i.call(this,e)||this).url="",c.channelType=w.BASE,c.name="",c.coverUrl="",c.customType="",c.data="",c.isFrozen=!1,c.isEphemeral=!1,c.creator=null,c.createdAt=0,c.url=t.channel_url,c.name=null!==(n=t.name)&&void 0!==n?n:"",c.coverUrl=null!==(r=t.cover_url)&&void 0!==r?r:"",c.customType=null!==(o=t.custom_type)&&void 0!==o?o:"",c.data=null!==(u=t.data)&&void 0!==u?u:"",c.isFrozen=!!s("boolean",t.freeze)&&t.freeze,c.isEphemeral=!!s("boolean",t.is_ephemeral)&&t.is_ephemeral,c.creator=t.created_by?new a(c._iid,t.created_by):null,c.createdAt=1e3*t.created_at,c._cachedMetaData=new Map,t.metadata&&t.ts&&Object.keys(t.metadata).forEach((function(e){c._cachedMetaData.set(e,{value:t.metadata[e],isRemoved:!1,updatedAt:t.ts})})),c}return n(d,i),d.payloadify=function(e){return t(r(r({},i.payloadify.call(this,e)),{channel_url:e.url,name:e.name,cover_url:e.coverUrl,custom_type:e.customType,data:e.data,freeze:e.isFrozen,is_ephemeral:e.isEphemeral,created_by:a.payloadify(e.creator),created_at:e.createdAt/1e3}))},d.prototype.isGroupChannel=function(){return this.channelType===w.GROUP},d.prototype.isOpenChannel=function(){return this.channelType===w.OPEN},Object.defineProperty(d.prototype,"cachedMetaData",{get:function(){var e={};return this._cachedMetaData.forEach((function(t,n){t.isRemoved||(e[n]=t.value)})),e},enumerable:!1,configurable:!0}),d.prototype._upsertCachedMetaData=function(e,t){var n=this;Object.keys(e).forEach((function(r){var a=n._cachedMetaData.get(r);(!a||a.updatedAt<=t)&&n._cachedMetaData.set(r,{value:e[r],isRemoved:!1,updatedAt:t})}))},d.prototype._removeFromCachedMetaData=function(e,t){var n=this;e.forEach((function(e){var r=n._cachedMetaData.get(e);r&&r.updatedAt<t&&(r.isRemoved=!1,r.updatedAt=t)}))},d.prototype._generateRequestId=function(){return"rq-".concat(q())},d.prototype.isIdentical=function(e){return e&&this.url===e.url},d.prototype.isEqual=function(e){return R(this,e)},d.prototype.createOperatorListQuery=function(e){return void 0===e&&(e={}),new we(this._iid,this.url,this.channelType,e)},d.prototype.createMutedUserListQuery=function(e){return void 0===e&&(e={}),new Se(this._iid,this.url,this.channelType,e)},d.prototype.createBannedUserListQuery=function(e){return void 0===e&&(e={}),new be(this._iid,this.url,this.channelType,e)},d.prototype.createPreviousMessageListQuery=function(e){return void 0===e&&(e={}),new k(this._iid,this.url,this.channelType,e)},d.prototype.addOperators=function(e){return m(this,void 0,void 0,(function(){var t,n;return v(this,(function(r){switch(r.label){case 0:return G(o("string",e)).throw(g.invalidParameters),t=_.of(this._iid).requestQueue,n=new Ae({channelUrl:this.url,channelType:this.channelType,operatorUserIds:e}),[4,t.send(n)];case 1:return r.sent(),[2]}}))}))},d.prototype.removeOperators=function(e){return m(this,void 0,void 0,(function(){var t,n;return v(this,(function(r){switch(r.label){case 0:return G(o("string",e)).throw(g.invalidParameters),t=_.of(this._iid).requestQueue,n=new De({channelUrl:this.url,channelType:this.channelType,operatorUserIds:e}),[4,t.send(n)];case 1:return r.sent(),[2]}}))}))},d.prototype.getMyMutedInfo=function(){return m(this,void 0,void 0,(function(){var e,t,n,r,a,i,s,o,u,c,l;return v(this,(function(d){switch(d.label){case 0:return e=_.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new qe({channelUrl:this.url,channelType:this.channelType,userId:t.userId}),[4,n.send(r)];case 1:return a=d.sent(),i=a.as(Re),s=i.isMuted,o=i.startAt,u=i.endAt,c=i.remainingDuration,l=i.description,[2,{isMuted:s,startAt:o,endAt:u,remainingDuration:c,description:l}]}}))}))},d.prototype.getMetaData=function(e){return m(this,void 0,void 0,(function(){var t,n,r,a,i,s;return v(this,(function(u){switch(u.label){case 0:return G(o("string",e)).throw(g.invalidParameters),t=_.of(this._iid).requestQueue,n=new ke({channelUrl:this.url,channelType:this.channelType,keys:e}),[4,t.send(n)];case 1:return r=u.sent(),a=r.as(Fe),i=a.metadata,s=a.ts,this._upsertCachedMetaData(i,s),[2,i]}}))}))},d.prototype.getAllMetaData=function(){return m(this,void 0,void 0,(function(){var e,t,n,r,a,i;return v(this,(function(s){switch(s.label){case 0:return e=_.of(this._iid).requestQueue,t=new ke({channelUrl:this.url,channelType:this.channelType,keys:[]}),[4,e.send(t)];case 1:return n=s.sent(),r=n.as(Fe),a=r.metadata,i=r.ts,this._upsertCachedMetaData(a,i),[2,a]}}))}))},d.prototype.createMetaData=function(e){return m(this,void 0,void 0,(function(){var t,n,r,a;return v(this,(function(i){switch(i.label){case 0:return t=_.of(this._iid).requestQueue,n=new Ne({channelUrl:this.url,channelType:this.channelType,metadata:e}),[4,t.send(n)];case 1:return r=i.sent(),a=r.as(Qe).metaData,this._upsertCachedMetaData(a,0),[2,a]}}))}))},d.prototype.updateMetaData=function(e,t){return void 0===t&&(t=!1),m(this,void 0,void 0,(function(){var n,r,a,i,s,o;return v(this,(function(u){switch(u.label){case 0:return n=_.of(this._iid).requestQueue,r=new Le({channelUrl:this.url,channelType:this.channelType,metadata:e,upsert:t}),[4,n.send(r)];case 1:return a=u.sent(),i=a.as(Oe),s=i.metadata,o=i.ts,this._upsertCachedMetaData(s,o),[2,s]}}))}))},d.prototype.deleteMetaData=function(e){return m(this,void 0,void 0,(function(){var t,n,r,a;return v(this,(function(i){switch(i.label){case 0:return G(s("string",e)).throw(g.invalidParameters),t=_.of(this._iid).requestQueue,n=new Ge({channelUrl:this.url,channelType:this.channelType,key:e}),[4,t.send(n)];case 1:return r=i.sent(),a=r.as(xe).ts,this._removeFromCachedMetaData([e],a),[2]}}))}))},d.prototype.deleteAllMetaData=function(){return m(this,void 0,void 0,(function(){var e,t,n,r;return v(this,(function(a){switch(a.label){case 0:return e=_.of(this._iid).requestQueue,t=new Ve({channelUrl:this.url,channelType:this.channelType}),[4,e.send(t)];case 1:return n=a.sent(),r=n.as(je).ts,this._removeFromCachedMetaData(ee([],te(this._cachedMetaData.keys()),!1),r),[2]}}))}))},d.prototype.getMetaCounters=function(e){return m(this,void 0,void 0,(function(){var t,n,r;return v(this,(function(a){switch(a.label){case 0:return G(o("string",e)).throw(g.invalidParameters),t=_.of(this._iid).requestQueue,n=new We({channelUrl:this.url,channelType:this.channelType,keys:e}),[4,t.send(n)];case 1:return r=a.sent(),[2,r.as(Be).metaCounter]}}))}))},d.prototype.getAllMetaCounters=function(){return m(this,void 0,void 0,(function(){var e,t,n;return v(this,(function(r){switch(r.label){case 0:return e=_.of(this._iid).requestQueue,t=new We({channelUrl:this.url,channelType:this.channelType,keys:[]}),[4,e.send(t)];case 1:return n=r.sent(),[2,n.as(Be).metaCounter]}}))}))},d.prototype.createMetaCounters=function(e){return m(this,void 0,void 0,(function(){var t,n,r;return v(this,(function(a){switch(a.label){case 0:return t=_.of(this._iid).requestQueue,n=new Ke({channelUrl:this.url,channelType:this.channelType,metaCounter:e}),[4,t.send(n)];case 1:return r=a.sent(),[2,r.as(Ye).metaCounter]}}))}))},d.prototype.updateMetaCounters=function(e,t){return void 0===t&&(t=!1),m(this,void 0,void 0,(function(){var n,r,a;return v(this,(function(i){switch(i.label){case 0:return n=_.of(this._iid).requestQueue,r=new He({channelUrl:this.url,channelType:this.channelType,metaCounter:e,upsert:t}),[4,n.send(r)];case 1:return a=i.sent(),[2,a.as(Je).metaCounter]}}))}))},d.prototype.increaseMetaCounters=function(e){return m(this,void 0,void 0,(function(){var t,n,r;return v(this,(function(a){switch(a.label){case 0:return t=_.of(this._iid).requestQueue,n=new He({channelUrl:this.url,channelType:this.channelType,metaCounter:e,upsert:!1,mode:"increase"}),[4,t.send(n)];case 1:return r=a.sent(),[2,r.as(Je).metaCounter]}}))}))},d.prototype.decreaseMetaCounters=function(e){return m(this,void 0,void 0,(function(){var t,n,r;return v(this,(function(a){switch(a.label){case 0:return t=_.of(this._iid).requestQueue,n=new He({channelUrl:this.url,channelType:this.channelType,metaCounter:e,upsert:!1,mode:"decrease"}),[4,t.send(n)];case 1:return r=a.sent(),[2,r.as(Je).metaCounter]}}))}))},d.prototype.deleteMetaCounter=function(e){return m(this,void 0,void 0,(function(){var t,n;return v(this,(function(r){switch(r.label){case 0:return G(s("string",e)).throw(g.invalidParameters),t=_.of(this._iid).requestQueue,n=new Ze({channelUrl:this.url,channelType:this.channelType,key:e}),[4,t.send(n)];case 1:return r.sent(),[2]}}))}))},d.prototype.deleteAllMetaCounters=function(){return m(this,void 0,void 0,(function(){var e,t;return v(this,(function(n){switch(n.label){case 0:return e=_.of(this._iid).requestQueue,t=new $e({channelUrl:this.url,channelType:this.channelType}),[4,e.send(t)];case 1:return n.sent(),[2]}}))}))},d.prototype.muteUser=function(e,t,n){return m(this,void 0,void 0,(function(){return v(this,(function(r){return[2,this.muteUserWithUserId(e.userId,t,n)]}))}))},d.prototype.muteUserWithUserId=function(e,t,n){return m(this,void 0,void 0,(function(){var r,a;return v(this,(function(i){switch(i.label){case 0:return G(s("string",e)&&s("number",t,!0)&&s("string",n,!0)).throw(g.invalidParameters),r=_.of(this._iid).requestQueue,a=new et({channelUrl:this.url,channelType:this.channelType,userId:e,seconds:t,description:n}),[4,r.send(a)];case 1:return i.sent(),[2]}}))}))},d.prototype.unmuteUser=function(e){return m(this,void 0,void 0,(function(){return v(this,(function(t){return[2,this.unmuteUserWithUserId(e.userId)]}))}))},d.prototype.unmuteUserWithUserId=function(e){return m(this,void 0,void 0,(function(){var t,n;return v(this,(function(r){switch(r.label){case 0:return G(s("string",e)).throw(g.invalidParameters),t=_.of(this._iid).requestQueue,n=new nt({channelUrl:this.url,channelType:this.channelType,userId:e}),[4,t.send(n)];case 1:return r.sent(),[2]}}))}))},d.prototype.banUser=function(e,t,n){return m(this,void 0,void 0,(function(){return v(this,(function(r){return[2,this.banUserWithUserId(e.userId,t,n)]}))}))},d.prototype.banUserWithUserId=function(e,t,n){return m(this,void 0,void 0,(function(){var r,a;return v(this,(function(i){switch(i.label){case 0:return G(s("string",e)&&s("number",t,!0)&&s("string",n,!0)).throw(g.invalidParameters),r=_.of(this._iid).requestQueue,a=new at({channelUrl:this.url,channelType:this.channelType,userId:e,seconds:t,description:n}),[4,r.send(a)];case 1:return i.sent(),[2]}}))}))},d.prototype.unbanUser=function(e){return m(this,void 0,void 0,(function(){return v(this,(function(t){return[2,this.unbanUserWithUserId(e.userId)]}))}))},d.prototype.unbanUserWithUserId=function(e){return m(this,void 0,void 0,(function(){var t,n;return v(this,(function(r){switch(r.label){case 0:return G(s("string",e)).throw(g.invalidParameters),t=_.of(this._iid).requestQueue,n=new st({channelUrl:this.url,channelType:this.channelType,userId:e}),[4,t.send(n)];case 1:return r.sent(),[2]}}))}))},d.prototype.freeze=function(){return m(this,void 0,void 0,(function(){var e,t;return v(this,(function(n){switch(n.label){case 0:return e=_.of(this._iid).requestQueue,t=new ut({channelUrl:this.url,channelType:this.channelType,freezing:!0}),[4,e.send(t)];case 1:return n.sent(),this.isFrozen=!0,[2]}}))}))},d.prototype.unfreeze=function(){return m(this,void 0,void 0,(function(){var e,t;return v(this,(function(n){switch(n.label){case 0:return e=_.of(this._iid).requestQueue,t=new ut({channelUrl:this.url,channelType:this.channelType,freezing:!1}),[4,e.send(t)];case 1:return n.sent(),this.isFrozen=!1,[2]}}))}))},d.prototype.getMessagesByMessageId=function(e,t){return m(this,void 0,void 0,(function(){var n;return v(this,(function(a){switch(a.label){case 0:return n=r(r({},ne),t),G(s("number",e)&&re(n)).throw(g.invalidParameters),[4,X.of(this._iid).getMessagesByMessageId(this.url,this.channelType,e,n)];case 1:return[2,a.sent()]}}))}))},d.prototype.getMessagesByTimestamp=function(e,t){return m(this,void 0,void 0,(function(){var n;return v(this,(function(a){switch(a.label){case 0:return n=r(r({},ne),t),G(s("number",e)&&re(n)).throw(g.invalidParameters),[4,X.of(this._iid).getMessagesByTimestamp(this.url,this.channelType,e,n)];case 1:return[2,a.sent()]}}))}))},d.prototype.getMessageChangeLogsSinceTimestamp=function(e,t){return m(this,void 0,void 0,(function(){var n;return v(this,(function(a){switch(a.label){case 0:return n=r(r({},ae),t),G(s("number",e)&&ie(n)).throw(g.invalidParameters),[4,X.of(this._iid).getMessageChangelogs(this.url,this.channelType,e,n)];case 1:return[2,a.sent()]}}))}))},d.prototype.getMessageChangeLogsSinceToken=function(e,t){return m(this,void 0,void 0,(function(){var n;return v(this,(function(a){switch(a.label){case 0:return n=r(r({},ae),t),G(s("string",e)&&ie(n)).throw(g.invalidParameters),[4,X.of(this._iid).getMessageChangelogs(this.url,this.channelType,e,n)];case 1:return[2,a.sent()]}}))}))},d.prototype._createPendingSendableMessagePayload=function(e,n,r){var a=_.of(this._iid).sessionManager;return t({channel_url:this.url,channel_type:this.channelType,msg_id:0,parent_message_id:e.parentMessageId,data:e.data,custom_type:e.customType,mention_type:e.mentionType,sorted_metaarray:e.metaArrays?e.metaArrays.map((function(e){return u.payloadify(e)})):null,apple_critical_alert_options:e.appleCriticalAlertOptions?l.payloadify(e.appleCriticalAlertOptions):null,created_at:r,user:F.payloadify(a.currentUser),req_id:n,request_state:N.PENDING,mentioned_user_ids:e.mentionedUserIds,mentioned_users:e.mentionedUsers})},d.prototype._createPendingUserMessage=function(e,n,a){var i,s,o={};if(e.translationTargetLanguages)try{for(var u=Q(e.translationTargetLanguages),c=u.next();!c.done;c=u.next()){o[c.value]=""}}catch(e){i={error:e}}finally{try{c&&!c.done&&(s=u.return)&&s.call(u)}finally{if(i)throw i.error}}var l=t(r(r({},this._createPendingSendableMessagePayload(e,n,a)),{type:L.USER,message:e.message,translations:o})),d=new E(this._iid,l);return d.messageParams=e,d},d.prototype._createPendingScheduledUserMessage=function(e,t,n){var r=this._createPendingUserMessage(e,t,n);return r.scheduledInfo={scheduledMessageId:0,scheduledAt:e.scheduledAt,scheduledMessageParams:e},r},d.prototype._createPendingFileMessage=function(e,n,a){var i=t(r(r({},this._createPendingSendableMessagePayload(e,n,a)),{type:L.FILE,url:e.fileUrl,file:{name:e.fileName,size:e.fileSize,type:e.mimeType,data:e.data},thumbnails:e.thumbnailSizes?e.thumbnailSizes.map((function(e){return{url:"",width:e.maxWidth,height:e.maxHeight}})):[]})),s=new C(this._iid,i);return s.messageParams=e,s},d.prototype._createPendingScheduledFileMessage=function(e,t,n){var r=this._createPendingFileMessage(e,t,n);return r.scheduledInfo={scheduledMessageId:0,scheduledAt:e.scheduledAt,scheduledMessageParams:e},r},d.prototype._markMessageAsFailed=function(e,t,n){void 0===n&&(n=!1),e.errorCode=t.code,t.code===O.REQUEST_CANCELED?e.sendingStatus=N.CANCELED:n||(e.sendingStatus=N.FAILED)},d.prototype.sendUserMessage=function(e){var t=r(r({},z),e);return G(x(t)).throw(g.invalidParameters),this._sendUserMessage(t)},d.prototype._sendUserMessage=function(e,t){var n=this;void 0===t&&(t=null);var a=_.of(this._iid),i=a.dispatcher,s=a.requestQueue,o=t,u=Date.now(),c=new Z;if(!o){o=this._generateRequestId();var l=_.of(this._iid).dispatcher;V(2).then((function(){var t=n._createPendingUserMessage(e,o,u);l.dispatch(new j({messages:[t],source:W.EVENT_MESSAGE_SENT_PENDING})),B((function(){return m(n,void 0,void 0,(function(){return v(this,(function(e){return[2,c._trigger(null,t)]}))}))}))}))}var d=new pt(r(r({},e),{channelUrl:this.url,channelType:this.channelType,reqId:o}));return s.send(d).then((function(e){var t=e.as(ft).message;i.dispatch(new j({messages:[t],source:W.EVENT_MESSAGE_SENT_SUCCESS})),B((function(){return m(n,void 0,void 0,(function(){return v(this,(function(e){return[2,c._trigger(null,t)]}))}))}))})).catch((function(t){if(K(t))throw t;V(2).then((function(){var r=n._createPendingUserMessage(e,o,u),a=_.of(n._iid).cacheContext.localCacheEnabled&&Y(t.code);n._markMessageAsFailed(r,t,a),i.dispatch(new j({messages:[r],source:r.sendingStatus===N.PENDING?W.REQUEST_RESEND_MESSAGE:W.EVENT_MESSAGE_SENT_FAILED})),B((function(){return m(n,void 0,void 0,(function(){return v(this,(function(e){return[2,c._trigger(t,r)]}))}))}))}))})),c},d.prototype._autoResendUserMessage=function(e){return G(e instanceof E).throw(g.invalidParameters),this._sendUserMessage(e.messageParams,e.reqId)},d.prototype.resendUserMessage=function(e){var t;return m(this,void 0,void 0,(function(){var n,r;return v(this,(function(a){return G(e instanceof E&&!e.scheduledInfo).throw(g.invalidParameters),n=new se,r=null!==(t=e.messageParams)&&void 0!==t?t:oe(e),this._sendUserMessage(r,e.reqId).onFailed((function(e){return n.reject(e)})).onSucceeded((function(e){return n.resolve(e)})),[2,n.promise]}))}))},d.prototype.updateUserMessage=function(e,t){return m(this,void 0,void 0,(function(){var n,a,i,o;return v(this,(function(u){switch(u.label){case 0:return n=r(r({},ge),t),G(s("number",e)&&_e(n)).throw(g.invalidParameters),a=_.of(this._iid).requestQueue,i=new mt(r({channelType:this.channelType,channelUrl:this.url,messageId:e},n)),[4,a.send(i)];case 1:return o=u.sent(),[2,o.as(vt).message]}}))}))},d.prototype.copyUserMessage=function(e,t){var n,a,i;return m(this,void 0,void 0,(function(){var s,o;return v(this,(function(u){return G(e instanceof d&&t instanceof E&&t.sendingStatus===N.SUCCEEDED&&this.url===t.channelUrl&&!t.scheduledInfo).throw(g.invalidParameters),G(!t.poll).throw(g.notSupportedError),s=new se,o=null!==(n=t.messageParams)&&void 0!==n?n:r(r({},t),{mentionType:t.mentionType,mentionedUserIds:null!==(a=t.mentionedUserIds)&&void 0!==a?a:null===(i=t.mentionedUsers)||void 0===i?void 0:i.map((function(e){return e.userId})),translationTargetLanguages:Object.keys(t.translations),pushNotificationDeliveryOption:c.DEFAULT,parentMessageId:null,isReplyToChannel:!1,isPinnedMessage:!1}),e._sendUserMessage(o).onSucceeded((function(e){s.resolve(e)})).onFailed((function(e){return s.reject(e)})),[2,s.promise]}))}))},d.prototype.translateUserMessage=function(e,t){return m(this,void 0,void 0,(function(){var n,r,a;return v(this,(function(i){switch(i.label){case 0:return G(e instanceof E&&e.messageId>0&&o("string",t)).throw(g.invalidParameters),n=_.of(this._iid).requestQueue,r=new Et({channelType:this.channelType,channelUrl:this.url,messageId:e.messageId,translationTargetLanguages:t}),[4,n.send(r)];case 1:return a=i.sent(),[2,a.as(St).message]}}))}))},d.prototype._createScheduledUserMessage=function(e,t){var n=this,a=_.of(this._iid).requestQueue,i=Date.now(),s=this._generateRequestId();V(2).then((function(){var r=n._createPendingScheduledUserMessage(e,s,i);B((function(){return m(n,void 0,void 0,(function(){return v(this,(function(e){return[2,t._trigger(null,r)]}))}))}))}));var o=new Pt(r({reqId:s,channelType:this.channelType,channelUrl:this.url},e));a.send(o).then((function(e){var r=e.as(Ct).message;B((function(){return m(n,void 0,void 0,(function(){return v(this,(function(e){return[2,t._trigger(null,r)]}))}))}))})).catch((function(r){if(K(r))throw r;V(2).then((function(){var a=n._createPendingScheduledUserMessage(e,s,i);n._markMessageAsFailed(a,r),B((function(){return m(n,void 0,void 0,(function(){return v(this,(function(e){return[2,t._trigger(r,a)]}))}))}))}))}))},d.prototype.sendFileMessage=function(e){var t=r(r({},H),e);return G(J(t)).throw(g.invalidParameters),this._sendFileMessage(t)},d.prototype._sendFileMessage=function(e,t){var n=this;void 0===t&&(t=null);var r=_.of(this._iid).dispatcher,a=X.of(this._iid).fileMessageQueue,i=t,s=Date.now(),o=new Z;return i||(i=this._generateRequestId(),V(2).then((function(){var t=n._createPendingFileMessage(e,i,s);r.dispatch(new j({messages:[t],source:W.EVENT_MESSAGE_SENT_PENDING})),B((function(){return m(n,void 0,void 0,(function(){return v(this,(function(e){return[2,o._trigger(null,t)]}))}))}))}))),a.request(this,i,e).then((function(e){r.dispatch(new j({messages:[e],source:W.EVENT_MESSAGE_SENT_SUCCESS})),B((function(){return m(n,void 0,void 0,(function(){return v(this,(function(t){return[2,o._trigger(null,e)]}))}))}))})).catch((function(t){if(K(t))throw t;V(2).then((function(){var a=n._createPendingFileMessage(e,i,s),u=_.of(n._iid).cacheContext.localCacheEnabled&&Y(t.code);n._markMessageAsFailed(a,t,u),r.dispatch(new j({messages:[a],source:a.sendingStatus===N.PENDING?W.REQUEST_RESEND_MESSAGE:W.EVENT_MESSAGE_SENT_FAILED})),B((function(){return m(n,void 0,void 0,(function(){return v(this,(function(e){return[2,o._trigger(t,a)]}))}))}))}))})),o},d.prototype._autoResendFileMessage=function(e){G(e instanceof C).throw(g.invalidParameters);var t=_.of(this._iid).logger;return t.debug("autoResendFileMessage pending",e),this._sendFileMessage(e.messageParams,e.reqId).onFailed((function(e){t.debug("autoResendFileMessage failed",e)})).onSucceeded((function(e){t.debug("autoResendFileMessage success",e)}))},d.prototype._createScheduledFileMessage=function(e,t,n,a){var i=this,s=_.of(this._iid).requestQueue,o=new bt(r(r({reqId:n,channelType:this.channelType,channelUrl:this.url},e),{fileUrl:e.fileUrl,requireAuth:e.requireAuth}));s.send(o).then((function(e){var n=e.as(At).message;B((function(){return m(i,void 0,void 0,(function(){return v(this,(function(e){return[2,t._trigger(null,n)]}))}))}))})).catch((function(r){if(K(r))throw r;V(2).then((function(){var s=i._createPendingScheduledFileMessage(e,n,a);i._markMessageAsFailed(s,r),B((function(){return m(i,void 0,void 0,(function(){return v(this,(function(e){return[2,t._trigger(r,s)]}))}))}))}))}))},d.prototype.sendFileMessages=function(e){var t,n;G(e.every((function(e){return J(r(r({},H),e))}))).throw(g.invalidParameters);var a=new Z;try{for(var i=Q(e),s=i.next();!s.done;s=i.next()){var o=s.value;this.sendFileMessage(o).onPending((function(e){return a._trigger(null,e)})).onFailed((function(e,t){return a._trigger(e,t)})).onSucceeded((function(e){return a._trigger(null,e)}))}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return a},d.prototype.resendFileMessage=function(e,t){var n;return m(this,void 0,void 0,(function(){var r,a,i;return v(this,(function(s){return r=Boolean(e.url)||ue(t)||ue(null===(n=e.messageParams)||void 0===n?void 0:n.file),G(e instanceof C&&r&&!e.scheduledInfo).throw(g.invalidParameters),a=new se,i=ce(e,t),this._sendFileMessage(i,e.reqId).onFailed((function(e){return a.reject(e)})).onSucceeded((function(e){return a.resolve(e)})),[2,a.promise]}))}))},d.prototype.updateFileMessage=function(e,t){return m(this,void 0,void 0,(function(){var n,a,i,o;return v(this,(function(u){switch(u.label){case 0:return n=r(r({},Ue),t),G(s("number",e)&&function(e){return ye(e)}(n)).throw(g.invalidParameters),a=_.of(this._iid).requestQueue,i=new yt(r({channelType:this.channelType,channelUrl:this.url,messageId:e},n)),[4,a.send(i)];case 1:return o=u.sent(),[2,o.as(gt).message]}}))}))},d.prototype.cancelUploadingFileMessage=function(e){return m(this,void 0,void 0,(function(){return v(this,(function(t){return G(s("string",e)).throw(g.invalidParameters),X.of(this._iid).fileMessageQueue.cancel(this,e),[2,!0]}))}))},d.prototype.copyFileMessage=function(e,t){var n,a;return m(this,void 0,void 0,(function(){var i,s;return v(this,(function(o){return G(e instanceof d&&t instanceof C&&t.sendingStatus===N.SUCCEEDED&&this.url===t.channelUrl&&!t.scheduledInfo).throw(g.invalidParameters),i=new se,s=r(r({},t),{fileUrl:t.url,fileName:t.name,fileSize:t.size,mimeType:t.type,mentionType:t.mentionType,mentionedUserIds:null!==(n=t.mentionedUserIds)&&void 0!==n?n:null===(a=t.mentionedUsers)||void 0===a?void 0:a.map((function(e){return e.userId})),pushNotificationDeliveryOption:c.DEFAULT,parentMessageId:null,isReplyToChannel:!1,thumbnailSizes:t.thumbnails.map((function(e){return{maxWidth:e.width,maxHeight:e.height}})),requireAuth:t.requireAuth,isPinnedMessage:!1}),e._sendFileMessage(s).onSucceeded((function(e){return i.resolve(e)})).onFailed((function(e){return i.reject(e)})),[2,i.promise]}))}))},d.prototype.deleteMessage=function(e){return m(this,void 0,void 0,(function(){var t,n;return v(this,(function(r){switch(r.label){case 0:return G(e instanceof le).throw(g.invalidParameters),e.messageId>0?(t=_.of(this._iid).requestQueue,n=new _t({channelType:this.channelType,channelUrl:this.url,messageId:e.messageId}),[4,t.send(n)]):[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},d.prototype.addReaction=function(e,t){return m(this,void 0,void 0,(function(){var n,r,a;return v(this,(function(i){switch(i.label){case 0:return G(e instanceof le&&e.messageId>0&&s("string",t)).throw(g.invalidParameters),n=_.of(this._iid).requestQueue,r=new Tt({channelType:this.channelType,channelUrl:this.url,messageId:e.messageId,reactionKey:t}),[4,n.send(r)];case 1:return a=i.sent(),[2,a.as(It).reactionEvent]}}))}))},d.prototype.deleteReaction=function(e,t){return m(this,void 0,void 0,(function(){var n,r,a;return v(this,(function(i){switch(i.label){case 0:return G(e instanceof le&&e.messageId>0&&s("string",t)).throw(g.invalidParameters),n=_.of(this._iid).requestQueue,r=new wt({channelType:this.channelType,channelUrl:this.url,messageId:e.messageId,reactionKey:t}),[4,n.send(r)];case 1:return a=i.sent(),[2,a.as(Mt).reactionEvent]}}))}))},d.prototype._updateMessageMetaArray=function(e,t,n,r){return m(this,void 0,void 0,(function(){var a,i,s,o,u,c;return v(this,(function(l){switch(l.label){case 0:return a=_.of(this._iid),i=a.dispatcher,s=a.requestQueue,o=new mt({channelType:this.channelType,channelUrl:this.url,messageId:e,metaArrayParams:{array:t,mode:n,upsert:r}}),[4,s.send(o)];case 1:return u=l.sent(),c=u.as(vt).message,i.dispatch(new j({messages:[c],source:W.EVENT_MESSAGE_UPDATED})),[2,c]}}))}))},d.prototype.createMessageMetaArrayKeys=function(e,t){return m(this,void 0,void 0,(function(){var n;return v(this,(function(r){return G(e instanceof le&&e.messageId>0&&o("string",t)).throw(g.invalidParameters),n=t.map((function(e){return new u({key:e})})),[2,this._updateMessageMetaArray(e.messageId,n,"add",!0)]}))}))},d.prototype.deleteMessageMetaArrayKeys=function(e,t){return m(this,void 0,void 0,(function(){var n;return v(this,(function(r){return G(e instanceof le&&e.messageId>0&&o("string",t)).throw(g.invalidParameters),n=t.map((function(e){return new u({key:e})})),[2,this._updateMessageMetaArray(e.messageId,n,"remove",!0)]}))}))},d.prototype.addMessageMetaArrayValues=function(e,t){return m(this,void 0,void 0,(function(){return v(this,(function(n){return G(e instanceof le&&e.messageId>0&&t.every((function(e){return e instanceof u}))).throw(g.invalidParameters),[2,this._updateMessageMetaArray(e.messageId,t,"add",!0)]}))}))},d.prototype.removeMessageMetaArrayValues=function(e,t){return m(this,void 0,void 0,(function(){return v(this,(function(n){return G(e instanceof le&&e.messageId>0&&t.every((function(e){return e instanceof u}))).throw(g.invalidParameters),[2,this._updateMessageMetaArray(e.messageId,t,"remove",!0)]}))}))},d.prototype.report=function(t,n){return m(this,void 0,void 0,(function(){var r,a,i,o;return v(this,(function(u){switch(u.label){case 0:return G(e(pe,t)&&s("string",n)).throw(g.invalidParameters),r=_.of(this._iid),a=r.sdkState,i=r.requestQueue,o=new lt({channelUrl:this.url,channelType:this.channelType,userId:a.userId,category:t,description:n}),[4,i.send(o)];case 1:return u.sent(),[2]}}))}))},d.prototype.reportUser=function(t,n,r){return m(this,void 0,void 0,(function(){var i,o,u,c;return v(this,(function(l){switch(l.label){case 0:return G(t instanceof a&&e(pe,n)&&s("string",r)).throw(g.invalidParameters),i=_.of(this._iid),o=i.sdkState,u=i.requestQueue,c=new dt({channelUrl:this.url,channelType:this.channelType,userId:o.userId,offendingUserId:t.userId,category:n,description:r}),[4,u.send(c)];case 1:return l.sent(),[2]}}))}))},d.prototype.reportMessage=function(t,n,r){return m(this,void 0,void 0,(function(){var a,i,o,u;return v(this,(function(c){switch(c.label){case 0:return G(t instanceof de&&e(pe,n)&&s("string",r)).throw(g.invalidParameters),a=_.of(this._iid),i=a.sdkState,o=a.requestQueue,u=new ht({channelUrl:this.url,channelType:this.channelType,userId:i.userId,offendingUserId:t.sender.userId,messageId:t.messageId,category:n,description:r}),[4,o.send(u)];case 1:return c.sent(),[2]}}))}))},d}($);export{be as B,Ct as C,Ut as D,ct as F,Se as M,we as O,Dt as P,pe as R,Xe as U,qt as a,me as b,fe as c,he as d,ze as e,ot as f,it as g,tt as h,rt as i,vt as j,gt as k,ft as l,ve as m,ge as n,_e as o,ye as v};
